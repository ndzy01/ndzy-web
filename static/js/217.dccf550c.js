(self.webpackChunkndzy_web=self.webpackChunkndzy_web||[]).push([["217"],{7:function(e,t,r){"use strict";r.d(t,{AcM:()=>p});var n=r(391);let i=r.n(n)()();function o(e,t){let r=e;if(Array.isArray(e)){let n=e;t?.maxCharCount&&"string"==typeof e[0]&&(n=e.filter(e=>e.length<=t.maxCharCount)),r=()=>s(n)}return void 0===t?.length?r(0):Array.from({length:t.length},(e,t)=>r(t))}function s(e){return e[Math.floor(i()*e.length)]}function l({min:e=1,max:t=9999.99,fraction:r=0}={}){if(t<e)throw Error("Max must be bigger than min");return Number((i()*(t-e)+e).toFixed(r))}let a="abcdefghijklmnopqrstuvwxyz";function u(e){return o(a.split(""),e)}a.toUpperCase();var c=["est","voluptatem","non","aut","aliquid","quaerat","quos","vel","tenetur","consectetur","ipsum","voluptate","numquam","nulla","asperiores","in","laborum","quas","et","ullam","consequuntur","enim","dicta","quia","facilis","voluptatibus","at","hic","sunt","excepturi","maiores","vitae","fugit","possimus","unde","repellat","sit","necessitatibus","nemo","qui","exercitationem","dolores","esse","reiciendis","nihil","commodi","id","sequi","consequatur","occaecati","deserunt","quae","eos","sapiente","fugiat","neque","quasi","nostrum","magnam","sed","omnis","doloribus","error","ducimus","rerum","beatae","cupiditate","blanditiis","labore"];function f(e){return o(()=>{var t;let r=s(c);return e?.capitalize&&(r=(t=r).charAt(0).toUpperCase()+t.slice(1)),r},e)}function d(e){return o(()=>{let e=f({capitalize:!0}),t=1;for(;t<50;){let r=f(),n="";if(++t>3&&(n=function(e){let t=l({min:1,max:10,fraction:0});return 1===t||50===e?".":2===t?",":""}(t)),e+=` ${r}${n}`,"."===n)break}return e},e)}function p(e){let t=e.min,r=e.max;if(t>=r)throw Error("Min must be less than max");return o(()=>(function(e){let t=e?.charCount??10;if(t<1||isNaN(t))throw"Character count must be greater than 0";return o(()=>{let e=d();if(1===t)return u();for(;e.length<t;)e+=` ${d()}`;return e.substring(0,t-2)+`${u()}.`},e)})({charCount:l({min:t,max:r})}),e)}},214:function(e,t,r){let n;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),n=!1,t.destroy=()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(736)(t);let{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736:function(e,t,r){e.exports=function(e){function t(e){let r,i,o,s=null;function l(...e){if(!l.enabled)return;let n=Number(new Date);l.diff=n-(r||n),l.prev=r,l.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";i++;let o=t.formatters[n];if("function"==typeof o){let t=e[i];r=o.call(l,t),e.splice(i,1),i--}return r}),t.formatArgs.call(l,e),(l.log||t.log).apply(l,e)}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=n,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(l),l}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let r of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(let r of t.skips)if(i(e,r))return!1;for(let r of t.names)if(i(e,r))return!0;return!1},t.humanize=r(585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},409:function(e){"use strict";e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},585:function(e){function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,o,s,l=typeof e;if("string"===l&&e.length>0){var a=e;if(!((a=String(a)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(u){var c=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*c;case"weeks":case"week":case"w":return 6048e5*c;case"days":case"day":case"d":return 864e5*c;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*c;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*c;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:break}}}return}if("number"===l&&isFinite(e)){return r.long?(i=Math.abs(n=e))>=864e5?t(n,i,864e5,"day"):i>=36e5?t(n,i,36e5,"hour"):i>=6e4?t(n,i,6e4,"minute"):i>=1e3?t(n,i,1e3,"second"):n+" ms":(s=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":s>=36e5?Math.round(o/36e5)+"h":s>=6e4?Math.round(o/6e4)+"m":s>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},581:function(e,t,r){"use strict";r.r(t),r.d(t,{Observable:()=>x,multicast:()=>I,unsubscribe:()=>w,scan:()=>P,filter:()=>k,merge:()=>M,flatMap:()=>T,map:()=>E,interval:()=>S,Subject:()=>_});class n{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){let t=Promise.all(this._pendingPromises),r=[],n=e=>r.push(e),i=Promise.resolve().then(()=>{var o,s,l,a;return o=this,s=void 0,l=void 0,a=function*(){for(let o of(yield t,yield e(n),this._pendingPromises.delete(i),r))this._baseObserver.next(o)},new(l||(l=Promise))(function(e,t){function r(e){try{i(a.next(e))}catch(e){t(e)}}function n(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(r,n)}i((a=a.apply(o,s||[])).next())})}).catch(e=>{this._pendingPromises.delete(i),this._baseObserver.error(e)});this._pendingPromises.add(i)}}let i=e=>"function"==typeof Symbol&&!!Symbol[e],o=e=>i(e)?Symbol[e]:"@@"+e;i("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));let s=o("iterator"),l=o("observable"),a=o("species");function u(e,t){let r=e[t];if(null!=r){if("function"!=typeof r)throw TypeError(r+" is not a function");return r}}function c(e){let t=e.constructor;return void 0!==t&&null===(t=t[a])&&(t=void 0),void 0!==t?t:y}function f(e){f.log?f.log(e):setTimeout(()=>{throw e},0)}function d(e){Promise.resolve().then(()=>{try{e()}catch(e){f(e)}})}function p(e){let t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{let e=u(t,"unsubscribe");e&&e.call(t)}}catch(e){f(e)}}function h(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function m(e,t,r){e._state="running";let n=e._observer;try{let i=n?u(n,t):void 0;switch(t){case"next":i&&i.call(n,r);break;case"error":if(h(e),i)i.call(n,r);else throw r;break;case"complete":h(e),i&&i.call(n)}}catch(e){f(e)}"closed"===e._state?p(e):"running"===e._state&&(e._state="ready")}function b(e,t,r){if("closed"!==e._state){if("buffering"===e._state){e._queue=e._queue||[],e._queue.push({type:t,value:r});return}if("ready"!==e._state){e._state="buffering",e._queue=[{type:t,value:r}],d(()=>(function(e){let t=e._queue;if(t){for(let r of(e._queue=void 0,e._state="ready",t))if(m(e,r.type,r.value),"closed"===e._state)break}})(e));return}m(e,t,r)}}class v{constructor(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";let r=new g(this);try{this._cleanup=t.call(void 0,r)}catch(e){r.error(e)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(h(this),p(this))}}class g{constructor(e){this._subscription=e}get closed(){return"closed"===this._subscription._state}next(e){b(this._subscription,"next",e)}error(e){b(this._subscription,"error",e)}complete(){b(this._subscription,"complete")}}class y{constructor(e){if(!(this instanceof y))throw TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,t,r){return("object"!=typeof e||null===e)&&(e={next:e,error:t,complete:r}),new v(e,this._subscriber)}pipe(e,...t){let r=this;for(let n of[e,...t])r=n(r);return r}tap(e,t,r){let n="object"!=typeof e||null===e?{next:e,error:t,complete:r}:e;return new y(e=>this.subscribe({next(t){n.next&&n.next(t),e.next(t)},error(t){n.error&&n.error(t),e.error(t)},complete(){n.complete&&n.complete(),e.complete()},start(e){n.start&&n.start(e)}}))}forEach(e){return new Promise((t,r)=>{if("function"!=typeof e)return void r(TypeError(e+" is not a function"));function n(){i.unsubscribe(),t(void 0)}let i=this.subscribe({next(t){try{e(t,n)}catch(e){r(e),i.unsubscribe()}},error(e){r(e)},complete(){t(void 0)}})})}map(e){if("function"!=typeof e)throw TypeError(e+" is not a function");return new(c(this))(t=>this.subscribe({next(r){let n=r;try{n=e(r)}catch(e){return t.error(e)}t.next(n)},error(e){t.error(e)},complete(){t.complete()}}))}filter(e){if("function"!=typeof e)throw TypeError(e+" is not a function");return new(c(this))(t=>this.subscribe({next(r){try{if(!e(r))return}catch(e){return t.error(e)}t.next(r)},error(e){t.error(e)},complete(){t.complete()}}))}reduce(e,t){if("function"!=typeof e)throw TypeError(e+" is not a function");let r=c(this),n=arguments.length>1,i=!1,o=t;return new r(t=>this.subscribe({next(r){let s=!i;if(i=!0,!s||n)try{o=e(o,r)}catch(e){return t.error(e)}else o=r},error(e){t.error(e)},complete(){if(!i&&!n)return t.error(TypeError("Cannot reduce an empty sequence"));t.next(o),t.complete()}}))}concat(...e){let t=c(this);return new t(r=>{let n,i=0;return!function o(s){n=s.subscribe({next(e){r.next(e)},error(e){r.error(e)},complete(){i===e.length?(n=void 0,r.complete()):o(t.from(e[i++]))}})}(this),()=>{n&&(n.unsubscribe(),n=void 0)}})}flatMap(e){if("function"!=typeof e)throw TypeError(e+" is not a function");let t=c(this);return new t(r=>{let n=[],i=this.subscribe({next(i){let s;if(e)try{s=e(i)}catch(e){return r.error(e)}else s=i;let l=t.from(s).subscribe({next(e){r.next(e)},error(e){r.error(e)},complete(){let e=n.indexOf(l);e>=0&&n.splice(e,1),o()}});n.push(l)},error(e){r.error(e)},complete(){o()}});function o(){i.closed&&0===n.length&&r.complete()}return()=>{n.forEach(e=>e.unsubscribe()),i.unsubscribe()}})}[(Symbol.observable,l)](){return this}static from(e){let t="function"==typeof this?this:y;if(null==e)throw TypeError(e+" is not an object");let r=u(e,l);if(r){let n=r.call(e);if(Object(n)!==n)throw TypeError(n+" is not an object");return n instanceof y&&n.constructor===t?n:new t(e=>n.subscribe(e))}if(i("iterator")){let r=u(e,s);if(r)return new t(t=>{d(()=>{if(!t.closed){for(let n of r.call(e))if(t.next(n),t.closed)return;t.complete()}})})}if(Array.isArray(e))return new t(t=>{d(()=>{if(!t.closed){for(let r of e)if(t.next(r),t.closed)return;t.complete()}})});throw TypeError(e+" is not observable")}static of(...e){return new("function"==typeof this?this:y)(t=>{d(()=>{if(!t.closed){for(let r of e)if(t.next(r),t.closed)return;t.complete()}})})}static get[a](){return this}}"function"==typeof Symbol&&Object.defineProperty(y,Symbol("extensions"),{value:{symbol:l,hostReportError:f},configurable:!0});let x=y,w=function(e){"function"==typeof e?e():e&&"function"==typeof e.unsubscribe&&e.unsubscribe()},k=function(e){return t=>new x(r=>{let i=new n(r),o=t.subscribe({complete(){i.complete()},error(e){i.error(e)},next(t){i.schedule(r=>{var n,i,o,s;return n=this,i=void 0,o=void 0,s=function*(){(yield e(t))&&r(t)},new(o||(o=Promise))(function(e,t){function r(e){try{a(s.next(e))}catch(e){t(e)}}function l(e){try{a(s.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):((n=t.value)instanceof o?n:new o(function(e){e(n)})).then(r,l)}a((s=s.apply(n,i||[])).next())})})}});return()=>w(o)})};var C=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var o,s,l;o=n,s=i,l=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:l})},s)})}}};let T=function(e){return t=>new x(r=>{let o=new n(r),s=t.subscribe({complete(){o.complete()},error(e){o.error(e)},next(t){o.schedule(r=>{var n,o,s,l;return n=this,o=void 0,s=void 0,l=function*(){let n=yield e(t);if(n&&i("iterator")&&n[Symbol.iterator]||n&&i("asyncIterator")&&n[Symbol.asyncIterator])try{for(var o,s,l,a=C(n);!(l=yield a.next()).done;){let e=l.value;r(e)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(s=a.return)&&(yield s.call(a))}finally{if(o)throw o.error}}else n.map(e=>r(e))},new(s||(s=Promise))(function(e,t){function r(e){try{a(l.next(e))}catch(e){t(e)}}function i(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):((n=t.value)instanceof s?n:new s(function(e){e(n)})).then(r,i)}a((l=l.apply(n,o||[])).next())})})}});return()=>w(s)})};function S(e){return new y(t=>{let r=0,n=setInterval(()=>{t.next(r++)},e);return()=>clearInterval(n)})}let E=function(e){return t=>new x(r=>{let i=new n(r),o=t.subscribe({complete(){i.complete()},error(e){i.error(e)},next(t){i.schedule(r=>{var n,i,o,s;return n=this,i=void 0,o=void 0,s=function*(){r((yield e(t)))},new(o||(o=Promise))(function(e,t){function r(e){try{a(s.next(e))}catch(e){t(e)}}function l(e){try{a(s.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):((n=t.value)instanceof o?n:new o(function(e){e(n)})).then(r,l)}a((s=s.apply(n,i||[])).next())})})}});return()=>w(o)})},M=function(...e){return 0===e.length?y.from([]):new y(t=>{let r=0,n=e.map(n=>n.subscribe({error(e){t.error(e),i()},next(e){t.next(e)},complete(){++r===e.length&&(t.complete(),i())}})),i=()=>{n.forEach(e=>w(e))};return i})},_=class extends x{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(let t of this._observers)t.next(e)}error(e){for(let t of this._observers)t.error(e)}complete(){for(let e of this._observers)e.complete()}},I=function(e){let t,r=new _,n=0;return new x(i=>{t||(t=e.subscribe(r));let o=r.subscribe(i);return n++,()=>{n--,o.unsubscribe(),0===n&&(w(t),t=void 0)}})},P=function(e,t){return r=>new x(i=>{let o,s=0,l=new n(i),a=r.subscribe({complete(){l.complete()},error(e){l.error(e)},next(r){l.schedule(n=>{var i,l,a,u;return i=this,l=void 0,a=void 0,u=function*(){let i=0===s?void 0===t?r:t:o;n(o=yield e(i,r,s++))},new(a||(a=Promise))(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var i;t.done?e(t.value):((i=t.value)instanceof a?i:new a(function(e){e(i)})).then(r,n)}o((u=u.apply(i,l||[])).next())})})}});return()=>w(a)})}},391:function(e,t,r){var n=r(180),i=r(181),o=r(31),s=r(67),l=r(833),a=r(717),u=r(801);u.alea=n,u.xor128=i,u.xorwow=o,u.xorshift7=s,u.xor4096=l,u.tychei=a,e.exports=u},180:function(e,t,r){!function(e,t,r){function n(e){var t,r=this,n=(t=0xefc8249d,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));t=n>>>0,n-=t,n*=t,t=n>>>0,n-=t,t+=0x100000000*n}return(t>>>0)*23283064365386963e-26});r.next=function(){var e=2091639*r.s0+23283064365386963e-26*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1)}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var r=new n(e),o=t&&t.state,s=r.next;return s.int32=function(){return 0x100000000*r.next()|0},s.double=function(){return s()+(2097152*s()|0)*11102230246251565e-32},s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.alea=o}(0,e=r.nmd(e),"function"==typeof define&&define)},717:function(e,t,r){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,i=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-0x61c88647,t.d=0x517cc1b7,e===Math.floor(e)?(t.a=e/0x100000000|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=r.charCodeAt(n),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/0x100000000};return s.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/0x100000000)/2097152;while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o}(0,e=r.nmd(e),"function"==typeof define&&define)},181:function(e,t,r){!function(e,t,r){function n(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=r.charCodeAt(n),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/0x100000000};return s.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/0x100000000)/2097152;while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o}(0,e=r.nmd(e),"function"==typeof define&&define)},833:function(e,t,r){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.w,i=t.X,o=t.i;return t.w=n=n+0x61c88647|0,r=i[o+34&127],e=i[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=i[o]=r^e,t.i=o,r+(n^n>>>16)|0},!function(e,t){var r,n,i,o,s,l=[],a=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,a=Math.max(a,t.length)),i=0,o=-32;o<a;++o)t&&(n^=t.charCodeAt((o+32)%t.length)),0===o&&(s=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,o>=0&&(s=s+0x61c88647|0,i=0==(r=l[127&o]^=n+s)?i+1:0);for(i>=128&&(l[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)n=l[i+34&127],r=l[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,l[i]=n^r;e.w=s,e.X=l,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/0x100000000};return s.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/0x100000000)/2097152;while(0===e);return e},s.int32=r.next,s.quick=s,o&&(o.X&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o}(0,e=r.nmd(e),"function"==typeof define&&define)},67:function(e,t,r){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.x,i=t.i;return e=n[i],e^=e>>>7,r=e^e<<24^((e=n[i+1&7])^e>>>10)^((e=n[i+3&7])^e>>>3)^((e=n[i+4&7])^e<<7),e=n[i+7&7],e^=e<<13,r^=e^e<<9,n[i]=r,t.i=i+1&7,r};var r,n=e,i=[];if(n===(0|n))i[0]=n;else for(r=0,n=""+n;r<n.length;++r)i[7&r]=i[7&r]<<15^n.charCodeAt(r)+i[r+1&7]<<13;for(;i.length<8;)i.push(0);for(r=0;r<8&&0===i[r];++r);for(8==r?i[7]=-1:i[r],t.x=i,t.i=0,r=256;r>0;--r)t.next()}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/0x100000000};return s.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/0x100000000)/2097152;while(0===e);return e},s.int32=r.next,s.quick=s,o&&(o.x&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o}(0,e=r.nmd(e),"function"==typeof define&&define)},31:function(e,t,r){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var r=new n(e),o=t&&t.state,s=function(){return(r.next()>>>0)/0x100000000};return s.double=function(){do var e=((r.next()>>>11)+(r.next()>>>0)/0x100000000)/2097152;while(0===e);return e},s.int32=r.next,s.quick=s,o&&("object"==typeof o&&i(o,r),s.state=function(){return i(r,{})}),s}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o}(0,e=r.nmd(e),"function"==typeof define&&define)},801:function(e,t,r){!function(t,n,i){var o,s="random",l=i.pow(256,6),a=i.pow(2,52),u=2*a;function c(e,r,c){var m=[],b=p(function e(t,r){var n,i=[],o=typeof t;if(r&&"object"==o)for(n in t)try{i.push(e(t[n],r-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((r=!0==r?{entropy:!0}:r||{}).entropy?[e,h(n)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(256):(e=new Uint8Array(256),(t.crypto||t.msCrypto).getRandomValues(e)),h(e)}catch(e){var r=t.navigator,i=r&&r.plugins;return[+new Date,t,i,t.screen,h(n)]}}():e,3),m),v=new f(m),g=function(){for(var e=v.g(6),t=l,r=0;e<a;)e=(e+r)*256,t*=256,r=v.g(1);for(;e>=u;)e/=2,t/=2,r>>>=1;return(e+r)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/0x100000000},g.double=g,p(h(v.S),n),(r.pass||c||function(e,t,r,n){return(n&&(n.S&&d(n,v),e.state=function(){return d(v,{})}),r)?(i[s]=e,t):e})(g,b,"global"in r?r.global:this==i,r.state)}function f(e){var t,r=e.length,n=this,i=0,o=n.i=n.j=0,s=n.S=[];for(r||(e=[r++]);i<256;)s[i]=i++;for(i=0;i<256;i++)s[i]=s[o=255&o+e[i%r]+(t=s[i])],s[o]=t;(n.g=function(e){for(var t,r=0,i=n.i,o=n.j,s=n.S;e--;)t=s[i=255&i+1],r=256*r+s[255&(s[i]=s[o=255&o+t])+(s[o]=t)];return n.i=i,n.j=o,r})(256)}function d(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){for(var r,n=e+"",i=0;i<n.length;)t[255&i]=255&(r^=19*t[255&i])+n.charCodeAt(i++);return h(t)}function h(e){return String.fromCharCode.apply(0,e)}if(p(i.random(),n),e.exports){e.exports=c;try{o=r(747)}catch(e){}}else"function"==typeof define&&define.amd?define(function(){return c}):i["seed"+s]=c}("undefined"!=typeof self?self:this,[],Math)},278:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=t.registerSerializer=void 0;let n=r(914),i=n.DefaultSerializer;t.registerSerializer=function(e){i=n.extendSerializer(i,e)},t.deserialize=function(e){return i.deserialize(e)},t.serialize=function(e){return i.serialize(e)}},447:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var o=r(278);Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return o.registerSerializer}}),i(r(838),t);var s=r(854);Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return s.expose}});var l=r(914);Object.defineProperty(t,"DefaultSerializer",{enumerable:!0,get:function(){return l.DefaultSerializer}});var a=r(712);Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return a.Transfer}})},29:function(e,t){"use strict";let r;function n(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}Object.defineProperty(t,"__esModule",{value:!0}),t.getBundleURL=t.getBaseURL=void 0,t.getBundleURL=function(){return r||(r=function(){try{throw Error()}catch(t){let e=(""+t.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(e)return n(e[0])}return"/"}()),r},t.getBaseURL=n},592:function(e,t,r){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.isWorkerRuntime=t.getWorkerImplementation=t.defaultPoolSize=void 0;let i=r(29);t.defaultPoolSize="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;let o=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function s(e){let t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}t.getWorkerImplementation=function(){return n||(n=function(){if("undefined"==typeof Worker)return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(e,t){var r,n;"string"==typeof e&&t&&t._baseURL?e=new URL(e,t._baseURL):"string"==typeof e&&!o(e)&&i.getBundleURL().match(/^file:\/\//i)&&(e=new URL(e,i.getBundleURL().replace(/\/[^\/]+$/,"/")),(null==(r=null==t?void 0:t.CORSWorkaround)||r)&&(e=s(`importScripts(${JSON.stringify(e)});`))),"string"==typeof e&&o(e)&&(null==(n=null==t?void 0:t.CORSWorkaround)||n)&&(e=s(`importScripts(${JSON.stringify(e)});`)),super(e,t)}}class t extends e{constructor(e,t){super(window.URL.createObjectURL(e),t)}static fromText(e,r){return new t(new window.Blob([e],{type:"text/javascript"}),r)}}return{blob:t,default:e}}()),n},t.isWorkerRuntime=function(){let e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return"undefined"!=typeof self&&!!self.postMessage&&!e}},838:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;let n=r(592);Object.defineProperty(t,"isWorkerRuntime",{enumerable:!0,get:function(){return n.isWorkerRuntime}});var i=r(734);Object.defineProperty(t,"Pool",{enumerable:!0,get:function(){return i.Pool}});var o=r(949);Object.defineProperty(t,"spawn",{enumerable:!0,get:function(){return o.spawn}});var s=r(996);Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return s.Thread}}),t.BlobWorker=n.getWorkerImplementation().blob,t.Worker=n.getWorkerImplementation().default},215:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createProxyModule=t.createProxyFunction=void 0;let i=n(r(214)),o=r(581),s=r(278),l=r(898),a=r(712),u=r(781),c=i.default("threads:master:messages"),f=1;function d(e,t){return(...r)=>{let n=f++,{args:i,transferables:d}=function(e){if(0===e.length)return{args:[],transferables:[]};let t=[],r=[];for(let n of e)a.isTransferDescriptor(n)?(t.push(s.serialize(n.send)),r.push(...n.transferables)):t.push(s.serialize(n));return{args:t,transferables:0===r.length?r:Array.from(new Set(r))}}(r),p={type:u.MasterMessageType.run,uid:n,method:t,args:i};c("Sending command to run function to worker:",p);try{e.postMessage(p,d)}catch(e){return l.ObservablePromise.from(Promise.reject(e))}return l.ObservablePromise.from(o.multicast(new o.Observable(t=>{let r,i=o=>{if(c("Message from worker:",o.data),o.data&&o.data.uid===n){let n;if((n=o.data)&&n.type===u.WorkerMessageType.running)r=o.data.resultType;else{let n;if((n=o.data)&&n.type===u.WorkerMessageType.result)"promise"===r?(void 0!==o.data.payload&&t.next(s.deserialize(o.data.payload)),t.complete(),e.removeEventListener("message",i)):(o.data.payload&&t.next(s.deserialize(o.data.payload)),o.data.complete&&(t.complete(),e.removeEventListener("message",i)));else{let r;if((r=o.data)&&r.type===u.WorkerMessageType.error){let r=s.deserialize(o.data.error);t.error(r),e.removeEventListener("message",i)}}}}};return e.addEventListener("message",i),()=>{if("observable"===r||!r){let t={type:u.MasterMessageType.cancel,uid:n};e.postMessage(t)}e.removeEventListener("message",i)}})))}}t.createProxyFunction=d,t.createProxyModule=function(e,t){let r={};for(let n of t)r[n]=d(e,n);return r}},882:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PoolEventType=void 0,(r=t.PoolEventType||(t.PoolEventType={})).initialized="initialized",r.taskCanceled="taskCanceled",r.taskCompleted="taskCompleted",r.taskFailed="taskFailed",r.taskQueued="taskQueued",r.taskQueueDrained="taskQueueDrained",r.taskStart="taskStart",r.terminated="terminated"},734:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function l(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;let o=i(r(214)),s=r(581),l=r(709),a=r(592),u=r(882);Object.defineProperty(t,"PoolEventType",{enumerable:!0,get:function(){return u.PoolEventType}});let c=r(996);Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return c.Thread}});let f=1;class d{constructor(e,t){this.eventSubject=new s.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];let r="number"==typeof t?{size:t}:t||{},{size:n=a.defaultPoolSize}=r;this.debug=o.default(`threads:pool:${(r.name||String(f++)).replace(/\W/g," ").trim().replace(/\s+/g,"-")}`),this.options=r,this.workers=(function(e){let t=[];for(let r=0;r<e;r++)t.push(r);return t})(n).map(()=>({init:e(),runningTasks:[]})),this.eventObservable=s.multicast(s.Observable.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:u.PoolEventType.initialized,size:this.workers.length}),e=>{this.debug("Error while initializing pool worker:",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){let{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return n(this,void 0,void 0,function*(){let r=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${r}...`),this.eventSubject.next({type:u.PoolEventType.taskStart,taskID:t.id,workerID:r});try{let n=yield t.run((yield e.init));this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:u.PoolEventType.taskCompleted,returnValue:n,taskID:t.id,workerID:r})}catch(e){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:u.PoolEventType.taskFailed,taskID:t.id,error:e,workerID:r})}})}run(e,t){return n(this,void 0,void 0,function*(){let r=n(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,0));try{yield this.runPoolTask(e,t)}finally{e.runningTasks=e.runningTasks.filter(e=>e!==r),this.isClosing||this.scheduleWork()}});e.runningTasks.push(r)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");let e=this.findIdlingWorker();if(!e)return;let t=this.taskQueue.shift();if(!t){this.debug("Task queue is empty"),this.eventSubject.next({type:u.PoolEventType.taskQueueDrained});return}this.run(e,t)}taskCompletion(e){return new Promise((t,r)=>{let n=this.events().subscribe(i=>{i.type===u.PoolEventType.taskCompleted&&i.taskID===e?(n.unsubscribe(),t(i.returnValue)):i.type===u.PoolEventType.taskFailed&&i.taskID===e?(n.unsubscribe(),r(i.error)):i.type===u.PoolEventType.terminated&&(n.unsubscribe(),r(Error("Pool has been terminated before task was run.")))})})}settled(e=!1){return n(this,void 0,void 0,function*(){let t=()=>{var e,t;return e=this.workers,t=e=>e.runningTasks,e.reduce((e,r)=>[...e,...t(r)],[])},r=[],n=this.eventObservable.subscribe(e=>{e.type===u.PoolEventType.taskFailed&&r.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):(e&&0===this.taskQueue.length?yield l.allSettled(t()):(yield new Promise((e,t)=>{let r=this.eventObservable.subscribe({next(t){t.type===u.PoolEventType.taskQueueDrained&&(r.unsubscribe(),e(void 0))},error:t})}),yield l.allSettled(t()),n.unsubscribe()),r)})}completed(e=!1){return n(this,void 0,void 0,function*(){let t=this.settled(e),r=new Promise((e,r)=>{let n=this.eventObservable.subscribe({next(i){i.type===u.PoolEventType.taskQueueDrained?(n.unsubscribe(),e(t)):i.type===u.PoolEventType.taskFailed&&(n.unsubscribe(),r(i.error))},error:r})}),n=yield Promise.race([t,r]);if(n.length>0)throw n[0]})}events(){return this.eventObservable}queue(e){let{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];let r=this.nextTaskID++,n=this.taskCompletion(r);n.catch(e=>{this.debug(`Task #${r} errored:`,e)});let i={id:r,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(e=>e!==i),this.eventSubject.next({type:u.PoolEventType.taskCanceled,taskID:i.id}))},then:n.then.bind(n)};if(this.taskQueue.length>=t)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:u.PoolEventType.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(e){return n(this,void 0,void 0,function*(){this.isClosing=!0,e||(yield this.completed(!0)),this.eventSubject.next({type:u.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>n(this,void 0,void 0,function*(){return c.Thread.terminate((yield e.init))})))})}}function p(e,t){return new d(e,t)}d.EventType=u.PoolEventType,p.EventType=u.PoolEventType,t.Pool=p},949:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function l(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.spawn=void 0;let o=i(r(214)),s=r(581),l=r(278),a=r(238),u=r(682),c=r(931),f=r(215),d=o.default("threads:master:messages"),p=o.default("threads:master:spawn"),h=o.default("threads:master:thread-utils"),m="undefined"!=typeof process&&process.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function b(e,t,r,n){let i=r.filter(e=>e.type===c.WorkerEventType.internalError).map(e=>e.error);return Object.assign(e,{[u.$errors]:i,[u.$events]:r,[u.$terminate]:n,[u.$worker]:t})}t.spawn=function(e,t){return n(this,void 0,void 0,function*(){p("Initializing new thread");let r=t&&t.timeout?t.timeout:m,i=(yield function(e,t,r){return n(this,void 0,void 0,function*(){let n,i=new Promise((e,i)=>{n=setTimeout(()=>i(Error(r)),t)}),o=yield Promise.race([e,i]);return clearTimeout(n),o})}(new Promise((t,r)=>{let n=i=>{let o;if(d("Message from worker before finishing initialization:",i.data),(o=i.data)&&"init"===o.type)e.removeEventListener("message",n),t(i.data);else{let t;(t=i.data)&&"uncaughtError"===t.type&&(e.removeEventListener("message",n),r(l.deserialize(i.data.error)))}};e.addEventListener("message",n)}),r,`Timeout: Did not receive an init message from worker after ${r}ms. Make sure the worker calls expose().`)).exposed,{termination:o,terminate:u}=function(e){let[t,r]=a.createPromiseWithResolver();return{terminate:()=>n(this,void 0,void 0,function*(){h("Terminating worker"),yield e.terminate(),r()}),termination:t}}(e),v=new s.Observable(t=>{let r=e=>{let r={type:c.WorkerEventType.message,data:e.data};t.next(r)},n=e=>{h("Unhandled promise rejection event in thread:",e);let r={type:c.WorkerEventType.internalError,error:Error(e.reason)};t.next(r)};e.addEventListener("message",r),e.addEventListener("unhandledrejection",n),o.then(()=>{let i={type:c.WorkerEventType.termination};e.removeEventListener("message",r),e.removeEventListener("unhandledrejection",n),t.next(i),t.complete()})});if("function"===i.type)return b(f.createProxyFunction(e),e,v,u);if("module"===i.type)return b(f.createProxyModule(e,i.methods),e,v,u);{let e=i.type;throw Error(`Worker init message states unexpected type of expose(): ${e}`)}})}},996:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Thread=void 0;let n=r(682);function i(e){throw Error(e)}t.Thread={errors:e=>e[n.$errors]||i("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:e=>e[n.$events]||i("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:e=>e[n.$terminate]()}},898:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservablePromise=void 0;let n=r(581),i=()=>void 0,o=e=>e,s=e=>Promise.resolve().then(e);function l(e){throw e}class a extends n.Observable{constructor(e){super(t=>{let r=this,n=Object.assign(Object.assign({},t),{complete(){t.complete(),r.onCompletion()},error(e){t.error(e),r.onError(e)},next(e){t.next(e),r.onNext(e)}});try{return this.initHasRun=!0,e(n)}catch(e){n.error(e)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(e){this.firstValueSet||(this.firstValue=e,this.firstValueSet=!0)}onError(e){for(let t of(this.state="rejected",this.rejection=e,this.rejectionCallbacks))s(()=>t(e))}onCompletion(){for(let e of(this.state="fulfilled",this.fulfillmentCallbacks))s(()=>e(this.firstValue))}then(e,t){let r=e||o,n=t||l,i=!1;return new Promise((e,t)=>{let o=r=>{if(!i){i=!0;try{e(n(r))}catch(e){t(e)}}};return(this.initHasRun||this.subscribe({error:o}),"fulfilled"===this.state)?e(r(this.firstValue)):"rejected"===this.state?(i=!0,e(n(this.rejection))):void(this.fulfillmentCallbacks.push(t=>{try{e(r(t))}catch(e){o(e)}}),this.rejectionCallbacks.push(o))})}catch(e){return this.then(void 0,e)}finally(e){let t=e||i;return this.then(e=>(t(),e),()=>t())}static from(e){return e&&"function"==typeof e.then?new a(t=>{e.then(e=>{t.next(e),t.complete()},e=>{t.error(e)})}):super.from(e)}}t.ObservablePromise=a},709:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allSettled=void 0,t.allSettled=function(e){return Promise.all(e.map(e=>{let t=Promise.resolve(e);try{return t.then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))}catch(e){return Promise.reject(e)}}))}},238:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPromiseWithResolver=void 0;let r=()=>void 0;t.createPromiseWithResolver=function(){let e,t=!1,n=r;return[new Promise(r=>{t?r(e):n=r}),r=>{t=!0,n(e=r)}]}},914:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSerializer=t.extendSerializer=void 0,t.extendSerializer=function(e,t){let r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:e=>t.deserialize(e,r),serialize:e=>t.serialize(e,n)}};t.DefaultSerializer={deserialize(e){let t;return e&&"object"==typeof e&&"__error_marker"in e&&"$$error"===e.__error_marker?Object.assign(Error((t=e).message),{name:t.name,stack:t.stack}):e},serialize:e=>{let t;return e instanceof Error?{__error_marker:"$$error",message:(t=e).message,name:t.name,stack:t.stack}:e}}},682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.$worker=t.$transferable=t.$terminate=t.$events=t.$errors=void 0,t.$errors=Symbol("thread.errors"),t.$events=Symbol("thread.events"),t.$terminate=Symbol("thread.terminate"),t.$transferable=Symbol("thread.transferable"),t.$worker=Symbol("thread.worker")},712:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.isTransferDescriptor=void 0;let n=r(682);t.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[n.$transferable]},t.Transfer=function(e,t){if(!t){if(!(e&&"object"==typeof e&&1))throw Error();t=[e]}return{[n.$transferable]:!0,send:e,transferables:t}}},931:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerEventType=void 0,r(682),(n=t.WorkerEventType||(t.WorkerEventType={})).internalError="internalError",n.message="message",n.termination="termination"},781:function(e,t){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(r=t.MasterMessageType||(t.MasterMessageType={})).cancel="cancel",r.run="run",(n=t.WorkerMessageType||(t.WorkerMessageType={})).error="error",n.init="init",n.result="result",n.running="running",n.uncaughtError="uncaughtError"},304:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isWorkerRuntime:function(){let e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return"undefined"!=typeof self&&!!self.postMessage&&!e},postMessageToMaster:function(e,t){self.postMessage(e,t)},subscribeToMasterMessages:function(e){let t=t=>{e(t.data)};return self.addEventListener("message",t),()=>{self.removeEventListener("message",t)}}}},854:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{a(n.next(e))}catch(e){o(e)}}function l(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;let o=i(r(409)),s=r(278),l=r(712),a=r(781),u=i(r(304));var c=r(278);Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return c.registerSerializer}});var f=r(712);Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return f.Transfer}}),t.isWorkerRuntime=u.default.isWorkerRuntime;let d=!1,p=new Map,h=e=>e&&e.type===a.MasterMessageType.run,m=e=>{var t;return o.default(e)||(t=e)&&"object"==typeof t&&"function"==typeof t.subscribe};function b(e){return l.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function v(e,t){let{payload:r,transferables:n}=b(t),i={type:a.WorkerMessageType.error,uid:e,error:s.serialize(r)};u.default.postMessageToMaster(i,n)}function g(e,t,r){let{payload:n,transferables:i}=b(r),o={type:a.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:n};u.default.postMessageToMaster(o,i)}function y(e){try{let t={type:a.WorkerMessageType.uncaughtError,error:s.serialize(e)};u.default.postMessageToMaster(t)}catch(t){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",t,"\nOriginal error:",e)}}function x(e,t,r){return n(this,void 0,void 0,function*(){let n;try{n=t(...r)}catch(t){return v(e,t)}let i=m(n)?"observable":"promise",o={type:a.WorkerMessageType.running,uid:e,resultType:i};if(u.default.postMessageToMaster(o),m(n)){let t=n.subscribe(t=>g(e,!1,s.serialize(t)),t=>{v(e,s.serialize(t)),p.delete(e)},()=>{g(e,!0),p.delete(e)});p.set(e,t)}else try{let t=yield n;g(e,!0,s.serialize(t))}catch(t){v(e,s.serialize(t))}})}t.expose=function(e){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,"function"==typeof e){u.default.subscribeToMasterMessages(t=>{h(t)&&!t.method&&x(t.uid,e,t.args.map(s.deserialize))});let t={type:a.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(t)}else if("object"==typeof e&&e){u.default.subscribeToMasterMessages(t=>{h(t)&&t.method&&x(t.uid,e[t.method],t.args.map(s.deserialize))});var t=Object.keys(e).filter(t=>"function"==typeof e[t]);let r={type:a.WorkerMessageType.init,exposed:{type:"module",methods:t}};u.default.postMessageToMaster(r)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);u.default.subscribeToMasterMessages(e=>{if(e&&e.type===a.MasterMessageType.cancel){let t=e.uid,r=p.get(t);r&&(r.unsubscribe(),p.delete(t))}})},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>y(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{let t=e.reason;t&&"string"==typeof t.message&&setTimeout(()=>y(t),250)})),"undefined"!=typeof process&&"function"==typeof process.on&&u.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>y(e),250)}),process.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>y(e),250)}))},107:function(e,t,r){"use strict";let n;r.d(t,{t9:()=>rC,wK:()=>rx});var i=r(540),o=r.t(i,2),s=r(848),l=Object.defineProperty,a=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class u{constructor(e=new Map){this.map=e}clone(){return new u(new Map(this.map))}decrement(e,t){let r=this.map.get(e);void 0!==r&&(r-=1,this.map.set(e,r),0===r&&t())}increment(e){let t=this.map.get(e)??0;this.map.set(e,t+1)}}class c{constructor(){a(this,"map",new Map)}delete(e){return this.map.delete(e)}get(e){return this.map.get(e)}getOrCreate(e){let t=this.map.get(e);return void 0===t&&(t=new Set,this.map.set(e,t)),t}use(e,t){let r=this.get(e);void 0!==r&&t(r)}}function f(){}let d="cell";function p(e,t){return e===t}let h=new Map;class m{constructor(e={}){for(let t of(a(this,"definitionRegistry",new Set),a(this,"distinctNodes",new Map),a(this,"executionMaps",new Map),a(this,"graph",new c),a(this,"pipeMap",new Map),a(this,"singletonSubscriptions",new Map),a(this,"state",new Map),a(this,"subscriptions",new c),Object.getOwnPropertySymbols(e)))this.state.set(t,e[t])}cellInstance(e,t=!0,r=Symbol()){return this.state.has(r)||this.state.set(r,e),!1===t||this.distinctNodes.has(r)||this.distinctNodes.set(r,!0===t?p:t),r}changeWith(e,t,r){this.connect({map:e=>(t,n)=>{e(r(n,t))},pulls:[e],sink:e,sources:[t]})}combine(...e){var t,r;return r=t=this.signalInstance(),this.connect({map:e=>(...t)=>{e(t)},sink:r,sources:e}),t}combineCells(...e){var t,r;return r=t=this.cellInstance(e.map(e=>this.getValue(e)),!0),this.connect({map:e=>(...t)=>{e(t)},sink:r,sources:e}),t}connect({map:e,pulls:t=[],sink:r,sources:n}){let i={map:e,pulls:new Set(t),sink:this.register(r),sources:new Set(n)};for(let e of[...n,...t])this.register(e),this.graph.getOrCreate(e).add(i);this.executionMaps.clear()}getValue(e){return this.register(e),this.state.get(e)}getValues(e){return e.map(e=>this.getValue(e))}inContext(e){let t=n;n=this;let r=e();return n=t,r}link(e,t){this.connect({map:e=>t=>{e(t)},sink:t,sources:[e]})}pipe(e,...t){return this.combineOperators(...t)(e)}pub(e,t){this.pubIn({[e]:t})}pubIn(e){var t;let r=Reflect.ownKeys(e).map(e=>this.pipeMap.get(e)??e),n=Reflect.ownKeys(e).reduce((t,r)=>{let n=e[r];return t[this.pipeMap.get(r)??r]=n,t},{}),i=this.getExecutionMap(r),o=i.refCount.clone(),s=i.participatingNodes.slice(),l=new Map(this.state),a=e=>{this.graph.use(e,t=>{for(let{sink:r,sources:n}of t)n.has(e)&&o.decrement(r,()=>{s.splice(s.indexOf(r),1),a(r)})})};for(;;){let e=s.shift();if(void 0===e)break;let r=!1,o=t=>{let n=this.distinctNodes.get(e);if(null!=n&&n(l.get(e),t)){r=!1;return}r=!0,l.set(e,t),this.state.has(e)&&this.state.set(e,t)};if(Object.hasOwn(n,e)?o(n[e]):i.projections.use(e,e=>{for(let t of e){let e=[...Array.from(t.sources),...Array.from(t.pulls)].map(e=>l.get(e));t.map(o)(...e)}}),r){let r=l.get(e);this.inContext(()=>{this.subscriptions.use(e,e=>{for(let t of e)t(r)})}),null==(t=this.singletonSubscriptions.get(e))||t(r)}else a(e)}}register(e){let t=h.get(e);if(void 0===t)return e;if(!this.definitionRegistry.has(e)){var r,n,i,o;if(this.definitionRegistry.add(e),t.type===d){return i=r=this.cellInstance(t.initial,t.distinct,e),this.inContext(()=>{t.init(this,i)}),r}if("signal"===t.type){return o=n=this.signalInstance(t.distinct,e),this.inContext(()=>{t.init(this,o)}),n}let s=this.signalInstance(t.distinct),l=this.cellInstance(t.initial,!0),a=this.cellInstance(t.initial,t.distinct,e);return this.link(l,a),this.pipeMap.set(a,s),this.inContext(()=>{t.init(this,s,l)}),a}return e}resetSingletonSubs(){this.singletonSubscriptions.clear()}signalInstance(e=!0,t=Symbol()){return!1!==e&&this.distinctNodes.set(t,!0===e?p:e),t}singletonSub(e,t){return this.register(e),void 0===t?this.singletonSubscriptions.delete(e):this.singletonSubscriptions.set(e,t),()=>this.singletonSubscriptions.delete(e)}sub(e,t){this.register(e);let r=this.subscriptions.getOrCreate(e);return r.add(t),()=>r.delete(t)}subMultiple(e,t){let r=this.signalInstance();return this.connect({map:e=>(...t)=>{e(t)},sink:r,sources:e}),this.sub(r,t)}transformer(...e){return t=>{var r;let n;return r=this.signalInstance(),n=r,this.link(this.pipe(n,...e),t),r}}calculateExecutionMap(e){let t=[],r=new Set,n=new c,i=new u,o=new c,s=(e,l=0)=>{i.increment(e),r.has(e)||(this.register(e),n.use(e,e=>{l=Math.max(...Array.from(e).map(e=>t.indexOf(e)))+1}),this.graph.use(e,t=>{for(let r of t)r.sources.has(e)?(o.getOrCreate(r.sink).add(r),s(r.sink,l)):n.getOrCreate(r.sink).add(e)}),r.add(e),t.splice(l,0,e))};return e.forEach(s),{participatingNodes:t,pendingPulls:n,projections:o,refCount:i}}combineOperators(...e){return t=>{for(let r of e)t=r(t,this);return t}}getExecutionMap(e){let t=e;if(1===e.length){t=e[0];let r=this.executionMaps.get(t);if(void 0!==r)return r}else for(let[t,r]of this.executionMaps.entries())if(Array.isArray(t)&&t.length===e.length&&t.every(t=>e.includes(t)))return r;let r=this.calculateExecutionMap(e);return this.executionMaps.set(t,r),r}}function b(e,t=f,r=!0){var n,i;return i=n=Symbol(),h.set(i,{distinct:r,init:t,initial:e,type:d}),n}function v(e=f,t=!1){var r,n;return n=r=Symbol(),h.set(n,{distinct:t,init:e,type:"signal"}),r}function g(e=f){var t,r;return r=t=Symbol(),h.set(r,{distinct:!1,init:e,type:"signal"}),t}let y=i.createContext(null),x="u">typeof document?i.useLayoutEffect:i.useEffect;function w(){let e=i.useContext(y);if(null===e)throw Error("useRealm must be used within a RealmContextProvider");return e}let k="useSyncExternalStore"in o?function(e){let t=w();t.register(e);let r=i.useCallback(r=>t.sub(e,r),[t,e]);return i.useSyncExternalStore(r,()=>t.getValue(e),()=>t.getValue(e))}:function(e){let t=w();t.register(e);let[r,n]=i.useState(()=>t.getValue(e));return x(()=>{let r=t.sub(e,()=>{n(()=>t.getValue(e))});return()=>{r()}},[t,e]),r};function C(e){return(t,r)=>{let n=r.signalInstance();return r.connect({map:t=>r=>{t(e(r))},sink:n,sources:[t]}),n}}function T(...e){return(t,r)=>{let n=r.signalInstance();return r.connect({map:e=>(...t)=>{e(t)},pulls:e,sink:n,sources:[t]}),n}}function S(e){return(t,r)=>{let n=r.signalInstance();return r.connect({map:t=>()=>{t(e)},sink:n,sources:[t]}),n}}function E(e){return(t,r)=>{let n=r.signalInstance();return r.connect({map:t=>r=>{e(r)&&t(r)},sink:n,sources:[t]}),n}}function M(e,t){return(r,n)=>{let i=n.signalInstance();return n.connect({map:r=>n=>{r(t=e(t,n))},sink:i,sources:[r]}),i}}function _(e){return(t,r)=>{let n=r.signalInstance(),i,o=null;return r.sub(t,t=>{i=t,null===o&&(o=setTimeout(()=>{o=null,r.pub(n,i)},e))}),n}}function I(e){return(t,r)=>{let n=r.signalInstance(),i,o=null;return r.sub(t,t=>{i=t,null!==o&&clearTimeout(o),o=setTimeout(()=>{r.pub(n,i)},e)}),n}}function P(){return(e,t)=>{let r=t.signalInstance();return t.sub(e,e=>{queueMicrotask(()=>{t.pub(r,e)})}),r}}function j(e){return(t,r)=>{let n=r.signalInstance(),i=Symbol(),o=i;return r.connect({map:e=>t=>{o!==i&&(e([o,t]),o=i)},sink:n,sources:[e]}),r.sub(t,e=>{o=e}),n}}function O(e,t){let r=b(e,e=>{e.link(t(e),r)});return r}let R={lvl:0};function z(e,t,r,n=R,i=R){return{k:e,l:n,lvl:r,r:i,v:t}}function F(e){return e===R}function W(e,t,r="k"){if(F(e))return[-1/0,void 0];if(e[r]===t)return[e.k,e.v];if(e[r]<t){let n=W(e.r,t,r);return n[0]===-1/0?[e.k,e.v]:n}return W(e.l,t,r)}function L(e,t,r){return F(e)?z(t,r,1):t===e.k?B(e,{k:t,v:r}):t<e.k?N(U(B(e,{l:L(e.l,t,r)}))):N(U(B(e,{r:L(e.r,t,r)})))}function A(e){return F(e)?[]:[...A(e.l),{k:e.k,v:e.v},...A(e.r)]}function B(e,t){return z(t.k??e.k,t.v??e.v,t.lvl??e.lvl,t.l??e.l,t.r??e.r)}function D(e){return F(e)||e.lvl>e.r.lvl}function H(e){let{l:t,r:r,lvl:n}=e;if(r.lvl>=n-1&&t.lvl>=n-1)return e;if(n>r.lvl+1){if(D(t))return U(B(e,{lvl:n-1}));if(!F(t)&&!F(t.r))return B(t.r,{l:B(t,{r:t.r.l}),lvl:n,r:B(e,{l:t.r.r,lvl:n-1})});throw Error("Unexpected empty nodes")}if(D(e))return N(B(e,{lvl:n-1}));if(!F(r)&&!F(r.l)){let t=r.l,i=D(t)?r.lvl-1:r.lvl;return B(t,{l:B(e,{lvl:n-1,r:t.l}),lvl:t.lvl+1,r:N(B(r,{l:t.r,lvl:i}))})}throw Error("Unexpected empty nodes")}function V(e,t,r){if(F(e))return[];let n=W(e,t)[0];return q(function e(t,r,n){if(F(t))return[];let{k:i,v:o,l:s,r:l}=t,a=[];return i>r&&(a=a.concat(e(s,r,n))),i>=r&&i<=n&&a.push({k:i,v:o}),i<=n&&(a=a.concat(e(l,r,n))),a}(e,n,r))}function $(e,t){let r=e.length;if(0===r)return[];let{index:n,value:i}=t(e[0]),o=[];for(let s=1;s<r;s++){let{index:r,value:l}=t(e[s]);o.push({end:r-1,start:n,value:i}),n=r,i=l}return o.push({end:1/0,start:n,value:i}),o}function q(e){return $(e,({k:e,v:t})=>({index:e,value:t}))}function N(e){let{r:t,lvl:r}=e;return F(t)||F(t.r)||t.lvl!==r||t.r.lvl!==r?e:B(t,{l:B(e,{r:t.l}),lvl:r+1})}function U(e){let{l:t}=e;return F(t)||t.lvl!==e.lvl?e:B(t,{r:B(e,{l:t.r})})}function Q(e,t,r,n=0){let i=e.length-1;for(;n<=i;){let o=Math.floor((n+i)/2),s=r(e[o],t);if(0===s)return o;if(-1===s){if(i-n<2)return o-1;i=o-1}else{if(i===n)return o;n=o+1}}throw Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function Y({index:e},t){return t===e?0:t<e?-1:1}function K({offset:e},t){return t===e?0:t<e?-1:1}function G(e){return{index:e.index,value:e}}let Z=[[],0,0,0],J=[R,0],X=v();b([]),b([]),b(0),b(null),b(NaN);let ee=b(!1),et=b(J,e=>{e.link(e.pipe(X,E(e=>e.length>0),T(er),C(([e,t])=>(function(e,[t,r]){if(r.length>0&&F(e)&&2===t.length){let e=t[0].size,n=t[1].size;return[r.reduce((t,r)=>L(L(t,r,e),r+1,n),R),0]}return function(e,t){let r=F(e)?0:1/0;for(let n of t){let{size:t,startIndex:i,endIndex:o}=n;if(r=Math.min(r,i),F(e)){e=L(e,0,t);continue}let s=V(e,i-1,o+1);if(s.some(function(e){let{size:t,startIndex:r,endIndex:n}=e;return e=>e.start===r&&(e.end===n||e.end===1/0)&&e.value===t}(n)))continue;let l=!1,a=!1;for(let{start:r,end:n,value:i}of s)l?(o>=r||t===i)&&(e=function e(t,r){if(F(t))return R;let{k:n,l:i,r:o}=t;if(r===n){if(F(i))return o;if(F(o))return i;let[e,r]=function e(t){return F(t.r)?[t.k,t.v]:e(t.r)}(i);return H(B(t,{k:e,l:function e(t){return F(t.r)?t.l:H(B(t,{r:e(t.r)}))}(i),v:r}))}return r<n?H(B(t,{l:e(i,r)})):H(B(t,{r:e(o,r)}))}(e,r)):(a=i!==t,l=!0),n>o&&o>=r&&i!==t&&(e=L(e,o+1,i));a&&(e=L(e,i,t))}return[e,r]}(e,t)})(t,[e,[]]))),et)}),er=b(J[0],e=>{e.link(e.pipe(et,C(([e])=>e)),er)}),en=b(J[1],e=>{e.link(e.pipe(et,C(([,e])=>e)),en)}),ei=b(Z[1]),eo=b(Z[0]),es=b(Z,e=>{e.link(e.pipe(er,T(en),M(([e],[t,r])=>(function(e,[t,r]){let n=0,i=0,o=0,s=0;if(0!==r){s=Q(e,r-1,Y),o=e[s].offset;let l=W(t,r-1);n=l[0],i=l[1],e.length&&e[s].height===W(t,r)[1]&&(s-=1),e=e.slice(0,s+1)}else e=[];for(let{start:s,value:l}of V(t,r,1/0)){let t=(s-n)*i+o;e.push({height:l,index:s,offset:t}),n=s,o=t,i=l}return[e,i,o,n]})(e,[t,r]),Z)),es),e.link(e.pipe(es,C(([,e])=>e)),ei),e.link(e.pipe(es,C(([e])=>e)),eo)}),el=b(Z[2],e=>{e.link(e.pipe(es,C(([,,e])=>e)),el)}),ea=b(Z[3],e=>{e.link(e.pipe(es,C(([,,,e])=>e)),ea)}),eu=b(0,e=>{e.link(e.pipe(e.combine(eH,ea,el,ei),C(([e,t,r,n])=>r+(e-t)*n)),eu)});function ec(e,t){if(0===t.length)return[0,0];let{offset:r,index:n,height:i}=t[Q(t,e,Y)];return[i*(e-n)+r,i]}function ef(e,t){return ec(e,t)[0]}function ed(e,t){return 1.01>Math.abs(e-t)}function ep(){return!(typeof navigator>"u")&&(/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1||/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent))}function eh(e){return!e}function em(e=1){return(t,r)=>{let n=r.signalInstance();return r.sub(t,t=>{let i=e;!function e(){i>0?(i--,requestAnimationFrame(e)):r.pub(n,t)}()}),n}}let eb="down",ev={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,viewportWidth:0,scrollHeight:0}};function eg(e){return(t,r)=>{let n=r.signalInstance();return r.sub(t,t=>{e>0?e--:r.pub(n,t)}),n}}b(!1);let ey=b(!0);v();let ex=b(!1),ew=v(e=>{e.link(e.pipe(ey,_(50)),ew)}),ek=b(4),eC=b(0,e=>{e.link(e.pipe(e.combine(tn,eC),C(([e,t])=>e<=t)),ey)}),eT=b(!1,e=>{e.link(e.pipe(tn,eg(1),S(!0)),eT),e.link(e.pipe(tn,eg(1),S(!1),I(100)),eT)}),eS=b(!1,e=>{e.link(e.pipe(t_,S(!0)),eS),e.link(e.pipe(t_,S(!1),I(200)),eS)}),eE=b(!1),eM=b(null,e=>{e.link(e.pipe(e.combine(ts,tn,ti,to,ek,tj,tk,er),E(([,,,,,,,e])=>!F(e)),M((e,[t,r,n,i,o,s])=>{let l={viewportWidth:i,viewportHeight:n,scrollTop:r,scrollHeight:t,listMarginTop:s};if(r+n-t+s>-o){let i,o;return r>e.state.scrollTop?(i="SCROLLED_DOWN",o=e.state.scrollTop-r):(i=t===n?"LIST_TOO_SHORT":"SIZE_DECREASED",o=e.state.scrollTop-r||e.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:i,scrollTopDelta:o}}return{atBottom:!1,notAtBottomBecause:n<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<e.state.viewportWidth?"VIEWPORT_WIDTH_DECREASING":r<e.state.scrollTop?"SCROLLING_UPWARDS":l.scrollHeight>e.state.scrollHeight||l.listMarginTop<e.state.listMarginTop?e.atBottom?"SIZE_INCREASED":e.notAtBottomBecause:e.atBottom?"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM":e.notAtBottomBecause,state:l}},ev)),eM),e.link(e.pipe(eM,M(({prev:e},t)=>{let r=!!(e&&t&&e.atBottom&&!t.atBottom&&"SIZE_INCREASED"===t.notAtBottomBecause);return{prev:t,shouldScroll:r}},{prev:null,shouldScroll:!1}),C(({shouldScroll:e})=>e)),eE),e.sub(e.pipe(ti,T(eM,tW,tL),E(([,,e,t])=>!e&&!t),M((e,[t,r])=>{let n=0;return e.viewportHeight>t&&r&&!r.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===r.notAtBottomBecause&&(n=e.viewportHeight-t),{viewportHeight:t,delta:n}},{viewportHeight:0,delta:0})),t=>{t.delta&&e.pub(t_,t.delta)})},(e,t)=>!!e&&e.atBottom===(null==t?void 0:t.atBottom)&&(!!e.atBottom||!!t.atBottom||e.notAtBottomBecause===t.notAtBottomBecause)),e_=b(0,e=>{e.link(e.pipe(e.combine(tn,ts,ti),M((e,[t,r,n])=>{if(!ed(e.scrollHeight,r)){let i=r-(t+n)<1;return e.scrollTop!==t&&i?{scrollHeight:r,scrollTop:t,jump:e.scrollTop-t,changed:!0}:{scrollHeight:r,scrollTop:t,jump:0,changed:!0}}return{scrollTop:t,scrollHeight:r,jump:0,changed:!1}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),E(e=>e.changed),C(e=>e.jump)),e_)}),eI=b(eb,e=>{e.link(e.pipe(tn,M((t,r)=>{if(r<0)return{direction:"up",prevScrollTop:0};if(e.getValue(eS))return{direction:t.direction,prevScrollTop:r};let n=r===t.prevScrollTop&&0===r;return{direction:r<t.prevScrollTop||n?"up":eb,prevScrollTop:r}},{direction:eb,prevScrollTop:0}),C(e=>e.direction)),eI),e.link(e.pipe(tn,I(100),S("none")),eI)}),eP=b(0,e=>{e.link(e.pipe(eT,E(eh),S(0)),eP),e.link(e.pipe(tn,_(100),T(eT),E(([,e])=>!!e),M(([,e],[t])=>[e,t],[0,0]),C(([e,t])=>t-e)),eP)});function ej(e,t){if("number"==typeof e)return{index:e,offset:0,behavior:"auto",align:"start-no-overflow"};let r={index:NaN,align:e.align??"start-no-overflow",behavior:e.behavior??"auto",offset:e.offset??0};return"LAST"===e.index?r.index=t:e.index<0?r.index=t+e.index:r.index=e.index,r}function eO({location:e,sizeTree:t,offsetTree:r,totalHeight:n,totalCount:i,viewportHeight:o,headerHeight:s,stickyHeaderHeight:l,stickyFooterHeight:a}){let{align:u,behavior:c,offset:f,index:d}=ej(e,i-1);function p(){let e=W(t,d)[1];if(void 0===e)throw Error(`Item at index ${d} not found`);return e}o-=l+a;let h=ef(d,r)+s-l;"end"===u?h=h-o+p():"center"===u&&(h=h-o/2+p()/2),f&&(h+=f);let m=0;return"start"===u&&(m=Math.max(0,Math.min(h-(n-o)))),{top:h=Math.max(0,h),behavior:c,align:u,forceBottomSpace:m}}let eR=b(null),ez=b(!1),eF=b(!0),eW=v(e=>{e.link(e.pipe(eW,C(()=>!0)),eF),e.link(e.pipe(eW,C(()=>null)),eR)}),eL=v(e=>{e.link(e.pipe(eL,T(eH,eo,tE),C(([e,t,r,n])=>{let{align:i,behavior:o,offset:s,index:l}=ej(e,t-1),a="number"!=typeof e?e.done:void 0,[u,c]=ec(l,r);return u<-n.listOffset?(("number"==typeof e||void 0===e.align)&&(i="start-no-overflow"),{index:l,align:i,behavior:o,offset:s,done:a}):u+c>-n.listOffset+n.visibleListHeight?(("number"==typeof e||void 0===e.align)&&(i="end"),{index:l,align:i,behavior:o,offset:s,done:a}):null}),E(e=>null!==e)),eA)}),eA=v(e=>{let t=e.pipe(eA,T(er,eo,eH,ti,tv,tu,tf,eu),C(([e,t,r,n,i,o,s,l,a])=>{try{return eO({location:e,totalHeight:a,sizeTree:t,offsetTree:r,totalCount:n,viewportHeight:i,headerHeight:o,stickyHeaderHeight:s,stickyFooterHeight:l})}catch{return null}}),E(e=>null!==e));e.link(eA,eR),e.link(t,tT),e.link(e.pipe(eA,E(e=>"number"!=typeof e&&"LAST"===e.index),S(!0)),ex),e.link(e.pipe(t,S(!1)),eF),e.link(e.pipe(t,S(!1)),ez),e.link(e.pipe(er,I(0),T(eF,eR),E(([,e,t])=>!e&&null!==t),C(([,,e])=>e)),eA),e.sub(e.pipe(tr,I(10)),()=>{let t=e.getValue(eR);null!==t&&"number"!=typeof t&&void 0!==t.done&&t.done(),e.pubIn({[eR]:null,[eF]:!0})}),e.link(e.pipe(ta,P(),E(e=>0!==e)),t_),e.link(e.pipe(ta,j(tn),C(()=>0)),ta)}),eB=b(null),eD=b(null,e=>{e.link(e.pipe(eD,E(e=>null!==e)),eB);let t=e.pipe(e.combine(eD,er),T(eB),E(([[e,t],r])=>null!==e&&!F(t)&&null!==r),C(([[e]])=>e));e.link(e.pipe(t,P()),eA),e.link(e.pipe(t,j(e.pipe(eF,E(e=>e))),S(null)),eB)},!1),eH=b(0),eV=b(null),e$=b(null,e=>{e.link(e.pipe(e$,E(e=>null!==e),C(e=>e.length)),eH)}),eq=b(null),eN=v(e=>{function t(t,r){e.pubIn({[e6]:!0,[t_]:t,[tP]:t}),r?requestAnimationFrame(()=>{e.pubIn({[tI]:0,[tP]:0,[eq]:null,[e7]:!1,[e6]:!1})}):e.pubIn({[tI]:0,[tP]:0,[eq]:null,[e7]:!1,[e6]:!1})}e.link(e.pipe(eN,T(ei),C(([e,t])=>-(t*e.length))),tI),e.link(e.pipe(eN,S(!0)),e7),e.link(e.pipe(eN,P()),eq),e.sub(e.pipe(eo,T(eq),E(([,e])=>null!==e),C(([e,t])=>{if(null===t)throw Error("Unexpected null items");return ef(t.length,e)})),e=>{t(e,!1)}),e.sub(e.pipe(eN,em(2),T(eo,eq),E(([,,e])=>null!==e),C(([e,t])=>ef(e.length,t))),e=>{t(e,!0)}),e.changeWith(e$,eN,(e,t)=>e?[...t,...e]:t.slice()),e.link(e.pipe(eN,T(er,ei),C(([e,t,r])=>{let n=e.length;return A(t).reduce((e,{k:t,v:r})=>({ranges:[...e.ranges,{startIndex:e.prevIndex,endIndex:t+n-1,size:e.prevSize}],prevIndex:t+n,prevSize:r}),{ranges:[],prevIndex:0,prevSize:r}).ranges})),X)}),eU=v(e=>{let t=e.pipe(eU,T(tE,tt,eV,er),E(([,,,,e])=>!F(e)),C(([{data:e,scrollToBottom:t},r,n,i])=>{if(!1===t||void 0===t)return null;let o="auto",s=r.isAtBottom;if("function"==typeof t){let l=t({data:e,scrollLocation:r,scrollInProgress:n,context:i,atBottom:s});if(!l)return null;if("object"==typeof l)return l;if("number"==typeof l)return{index:l,align:"end",behavior:"auto"};o=l}else{if(!s)return null;o=t}return!0===o&&(o="auto"),{index:"LAST",align:"end",behavior:o}}));e.link(e.pipe(t,E(e=>null!==e),C(()=>!0)),ex),e.link(e.pipe(tr,T(ex),E(([e,t])=>t),C(()=>!1)),ex);let r=e.pipe(tR,T(ex),E(([e,t])=>"up"===e&&t));e.link(e.pipe(r,C(()=>!1)),ex),e.link(e.pipe(r,S(!0)),eW),e.link(e.pipe(t,E(e=>null!==e),I(20)),eA)}),eQ=v(e=>{e.changeWith(e$,eQ,(e,t)=>e?[...e,...t.data]:t.data.slice()),e.link(eQ,eU)}),eY=v(e=>{e.changeWith(e$,eY,(e,t)=>e?[...e.slice(0,t.offset),...t.data,...e.slice(t.offset)]:t.data.slice()),e.changeWith(et,eY,([e],t)=>{let r=W(e,t.offset,"k")[0],n=t.data.length;return[function(e,t,r,n){if(F(e))return R;let i=R;for(let{k:o,v:s}of A(e))i=o>t&&o<=r?L(i,...n(o,s)):L(i,o,s);return i}(e,r,1/0,(e,t)=>[e+n,t]),r]}),e.link(eY,eU)}),eK=v(e=>{e.changeWith(e$,eK,(e,{offset:t,count:r})=>e?e.slice(0,t).concat(e.slice(t+r)):[]),e.changeWith(et,eK,([e],{offset:t,count:r})=>[function(e,t,r){let n=R,i=-1;for(let{start:o,end:s,value:l}of q(A(e)))o<t?(n=L(n,o,l),i=l):o>t+r?n=L(n,o-r,l):s>=t+r&&i!==l&&(n=L(n,t,l));return n}(e,t,r),t])}),eG=b(null),eZ=v(e=>{e.sub(e.pipe(eZ,T(e$),E(([{purgeItemSizes:e},t])=>!!e||null===t||0===t.length)),([t,r])=>{null===r||0===r.length?e.pubIn({...t.initialLocation?{[eD]:t.initialLocation}:{},[e$]:t.data.slice()}):e.pubIn({...t.initialLocation?{[eD]:t.initialLocation}:{},[et]:J,[e5]:e3,[eG]:t.data.slice()})}),e.sub(e.pipe(tF,T(eG),em(),E(([,e])=>null!==e)),([,t])=>{e.pubIn({[e$]:t,[eG]:null})}),e.link(e.pipe(eZ,E(({purgeItemSizes:e})=>!e),T(ei),E(([,e])=>e>0),C(([{data:e},t])=>[{size:t,startIndex:e.length,endIndex:1/0}])),X),e.sub(e.pipe(eZ,E(({purgeItemSizes:e})=>!e)),({data:t,initialLocation:r,suppressItemMeasure:n})=>{requestAnimationFrame(()=>{n||e.pub(tz),requestAnimationFrame(()=>{r&&e.pubIn({[eA]:r})})}),e.pubIn({[e$]:t.slice()})})}),eJ=v(e=>{e.link(e.pipe(eJ,T(eo),C(([e,t])=>-ef(e,t))),t_),e.changeWith(e$,e.pipe(eJ,P()),(e,t)=>e?e.slice(t):[]),e.changeWith(et,e.pipe(eJ,P()),([e],t)=>[A(e).reduce((e,{k:r,v:n})=>L(e,Math.max(0,r-t),n),R),0])}),eX=v(e=>{e.changeWith(e$,eX,(e,t)=>e?e.slice(0,e.length-t):[]),e.link(e.pipe(eX,T(eH,ei),C(([,e,t])=>[{size:t,startIndex:e,endIndex:1/0}])),X)}),e0=v(e=>{let t=e.pipe(e0,T(e$),C(([e,t])=>{if(!t)return[];let r=[];return t.forEach((t,n)=>{e(t,n)&&r.push(n)}),r}));e.changeWith(e$,t,(e,t)=>e?e.filter((e,r)=>!t.includes(r)):[]),e.changeWith(et,t,([e],t)=>[function(e,t){var r,n;let i=t.slice(),o=0,s=[];for(let{k:t,v:l}of A(e)){for(;i.length&&i[0]<t;)i.shift(),o++;let e=Math.max(0,t-o);e===((null==(r=s.at(-1))?void 0:r.k)??-1)?((null==(n=s.at(-2))?void 0:n.v)??-1)===l?s.pop():s[s.length-1].v=l:s.push({k:e,v:l})}let l=R;for(let{k:e,v:t}of s)l=L(l,e,t);return l}(e,t),0])}),e1=v(e=>{e.changeWith(e$,e1,(e,{mapper:t})=>e?e.map(t):[]),e.link(e.pipe(e1,em(3),T(eE),E(([{autoscrollToBottomBehavior:e},t])=>t&&!!e),C(([{autoscrollToBottomBehavior:e}])=>"object"==typeof e?e.location():{index:"LAST",align:"end",behavior:e}),E(e=>!!e)),eA)}),e2=v(e=>{e.changeWith(e$,e2,(e,{newData:t})=>t),e.link(e.pipe(e2,em(3),T(eE),E(([{autoscrollToBottomBehavior:e},t])=>t&&!!e),C(([{autoscrollToBottomBehavior:e}])=>"object"==typeof e?e.location():{index:"LAST",align:"end",behavior:e}),E(e=>!!e)),eA)}),e3={items:[],listBottom:0,listTop:0,offsetTree:[],paddingBottom:0,paddingTop:0,totalCount:0,totalHeight:0,deviationDelta:0,data:null},e6=b(!1),e5=b(e3,e=>{e.link(e.pipe(e.combine(tl,tw,er,eo,eH,eu,e$,ta,eD,eB,tc,tu,tf,tI,e6,ee,e8),E(e=>{let t=e.at(-1),r=e.at(-2),n=e.at(-3);return!r&&!t&&!n}),M((t,[r,n,i,o,s,l,a,u,c,f,d,p,h,m])=>{var b,v;if((null==a?void 0:a.length)===0)return e3;if(F(i)){let e=0;return null!==c&&(e=ej(c,s-1).index),{...e3,items:(v=e,[{data:null==a?void 0:a[v],prevData:(null==a?void 0:a[v-1])??null,nextData:(null==a?void 0:a[v+1])??null,height:0,index:v,offset:0,type:"flat"}]),offsetTree:o,totalCount:s,data:a}}let g=0;null!==f&&0===r&&(g=eO({totalHeight:l,location:f,sizeTree:i,offsetTree:o,totalCount:s,viewportHeight:e.getValue(ti),headerHeight:e.getValue(tv),stickyHeaderHeight:p,stickyFooterHeight:h}).top??0);let y=0;0!==e.getValue(tn)&&!e.getValue(te)&&"up"===e.getValue(eI)&&t.totalCount===s&&t.items.length>0&&0!=(y=l-t.totalHeight)&&(y+=e.getValue(e_));let x=e.getValue(tm),w=Math.min(Math.max(r+g+u-m-d+y-x,0),l-n),k=w+n+2*x;if(t.offsetTree===o&&t.totalCount===s&&t.data===a&&w>=t.listTop&&k<=t.listBottom)return t;let C=[],T=s-1,S=function(e,t,r,n=0){return n>0&&(t=Math.max(t,e[Q(e,n,Y)].offset)),$(function(e,t,r,n){let i=Q(e,t,n),o=Q(e,r,n,i);return e.slice(i,o+1)}(e,t=Math.max(0,t),r,K),G)}(o,w,k,0),E=0,M=0,_=!1;for(let e of S){let{value:{offset:t,height:r}}=e,n=e.start;E=t,t<w&&(n+=Math.floor((w-t)/r),E+=(n-e.start)*r),n<0&&(E+=(0-n)*r,n=0);let i=Math.min(e.end,T);for(let e=n;e<=i&&!(E>=k);e++){let t={data:null==a?void 0:a[e],prevData:(null==a?void 0:a[e-1])??null,nextData:(null==a?void 0:a[e+1])??null,height:r,index:e,offset:E,type:"flat"};_||(_=!0,M=E),C.push(t),E+=r}}0===C.length&&(M=E=0);let I=l-E,P=(null==(b=C[0])?void 0:b.offset)||0;return{items:C,listBottom:E,listTop:M,offsetTree:o,paddingBottom:I,paddingTop:P,totalCount:s,totalHeight:l,data:a,deviationDelta:y}},e3)),e5)}),e9=O([],e=>e.pipe(e.combine(e5,tn),C(([e,t])=>{let r=e.items.slice();for(;r.length>0&&r[0].offset+r[0].height<t;)r.shift();return r.map(e=>e.data)}))),e8=b(!1),e7=b(!1),e4=v(e=>{e.link(e.pipe(e5,C(e=>e.deviationDelta),E(e=>0!==e)),e4),ep()?(e.sub(e.pipe(e4,T(tI,tn)),([t,r])=>{e.pub(tI,r-t)}),e.sub(e.pipe(e.combine(tn,tI,ee,e7)),([t,r,n,i])=>{n||i||(r>0&&t<r?(e.pub(e8,!0),e.pub(tT,{top:0,behavior:"instant"}),setTimeout(()=>{e.pubIn({[e8]:!1,[tI]:0})})):r<0&&t<=0&&(e.pubIn({[e8]:!0,[tI]:0}),setTimeout(()=>{e.pub(tT,{top:0,behavior:"instant"}),e.pub(e8,!1)})))}),e.sub(e.pipe(e.combine(eT,tI,e8,ee,e7),E(([e,t,r,n,i])=>!e&&0!==t&&!r&&!n&&!i),_(100)),([,t])=>{e.pub(e8,!0),t<0?requestAnimationFrame(()=>{e.pub(t_,-t),e.pub(tI,0),requestAnimationFrame(()=>{e.pub(e8,!1)})}):requestAnimationFrame(()=>{e.pub(t_,-t),e.pub(tI,0),requestAnimationFrame(()=>{e.pub(e8,!1)})})})):e.link(e4,t_)}),te=v(),tt=b(!1),tr=v(e=>{e.link(e.pipe(tr,S(!1)),te)},!1),tn=b(0),ti=b(0),to=b(0),ts=b(0),tl=tn,ta=b(0),tu=b(0),tc=b(0),tf=b(0),td=b(0),tp=b(null),th=g(),tm=b(0),tb=function(e){return 1===e?1:1-2**(-10*e)},tv=O(0,e=>e.pipe(e.combine(tu,tc),C(([e,t])=>e+t))),tg=O(0,e=>e.pipe(e.combine(tf,td),C(([e,t])=>e+t))),ty=O(0,e=>e.pipe(e.combine(tu,tc,tn),C(([e,t,r])=>e+Math.max(t-r,0)))),tx=O(0,e=>e.pipe(e.combine(tf,td,tn,ti,ts),C(([e,t,r,n,i])=>(r=Math.min(r,i-n),e+Math.max(t-(i-(r+n)),0))))),tw=O(0,e=>e.pipe(e.combine(ti,ty,tx),C(([e,t,r])=>Math.max(0,e-t-r)))),tk=b(0),tC=b(0,e=>{e.link(e.pipe(e.combine(tC,eu,ti,tv,tu),C(([e,t,r,n,i])=>0===e?0:Math.max(0,Math.min(e-(t+n+i-r))))),tk)}),tT=v(e=>{e.link(e.pipe(tT,C(e=>"start"===e.align?e.top??0:0)),tC),e.link(e.pipe(tT,T(tn),E(([e,t])=>e.top!==t),S(!0)),te)}),tS=v(e=>{e.link(e.pipe(tT,T(tA),C(([e,t])=>("top"in e&&"u">typeof e.top&&(e={...e,top:e.top+t}),e))),tS)}),tE=O({listOffset:0,visibleListHeight:0,scrollHeight:0,bottomOffset:0,isAtBottom:!1},e=>e.pipe(e.combine(tn,tv,tg,tc,tw,ts,tk,ee,eB,e8,ex),E(([,,,,,,,e,t,r])=>!e&&null===t&&!r),C(([t,r,n,i,o,s,l,a,u,c,f])=>{let d=e.getValue(ek),p=s-r-n,h=-t+i,m=p+Math.min(0,h)-o-l;return{scrollHeight:p,listOffset:h,visibleListHeight:o,bottomOffset:m,isAtBottom:f||m<=d}}))),tM=v(e=>{e.link(e.pipe(tn,I(0),T(tE,eB,ee),E(([,e,t,r])=>e.scrollHeight>0&&null==t&&!r),C(([,e])=>e)),tM)}),t_=v(),tI=b(0),tP=b(0),tj=b(0),tO=b(""),tR=v(),tz=g(),tF=g(),tW=b(!1),tL=b(null);b(0);let tA=b(0,e=>{e.link(e.pipe(e.combine(tD,tB,tA),C(([e,t,r])=>e-Math.max(0,r-t))),ti)}),tB=b(0,e=>{e.link(e.pipe(e.combine(tB,tA),C(([e,t])=>Math.max(0,e-t))),tn)}),tD=b(0),tH=b(null),tV=b(null),t$=b(null),tq=b(null),tN=b(null),tU=b("div"),tQ={position:"sticky",top:0,zIndex:1},tY={overflowAnchor:"none"},tK={position:"sticky",bottom:0},tG=i.forwardRef((e,t)=>(0,s.jsx)("div",{style:{zIndex:1},...e,ref:t})),tZ=i.forwardRef((e,t)=>(0,s.jsx)("div",{...e,ref:t})),tJ=i.forwardRef(({style:e,...t},r)=>(0,s.jsx)("div",{...t,style:{...tQ,...e},ref:r})),tX=i.forwardRef(({style:e,...t},r)=>(0,s.jsx)("div",{...t,style:{...tK,...e},ref:r})),t0=b(tG),t1=b(tJ),t2=b(tZ),t3=b(tX),t6=({index:e})=>(0,s.jsxs)("div",{children:["Item ",e]}),t5=({index:e})=>e,t9=b(t6),t8=b(t5),t7=e=>e,t4=b(t7),re=b(null,e=>{e.sub(e.pipe(re,T(e$,t4,eo,et)),([t,r,n,i,o])=>{if(void 0===t)return;if(!t||!t.data||!t.data.length)return void e.pubIn({[e$]:[],[et]:J,[e5]:e3});let s=t.data,l=t.scrollModifier;if("prepend"===l){if(null===r||!r.length)return void e.pub(e$,s);let t=r[0],i=s.findIndex(e=>n(e)===n(t)),o=-1===i?s:s.slice(0,i),l=-1===i?[]:s.slice(i);return e.pubIn({[e$]:l}),void e.pubIn({[eN]:o})}if("remove-from-start"===l){let t=s[0],l=(null==r?void 0:r.findIndex(e=>n(e)===n(t)))??-1;if(-1===l)return void e.pub(e$,s);let a=ef(l,i);return e.pub(t_,-a),void queueMicrotask(()=>{e.pub(e$,s);let t=A(o[0]).reduce((e,{k:t,v:r})=>L(e,Math.max(0,t-l),r),R);e.pub(et,[t,0])})}if("remove-from-end"===l){e.pub(e$,s),e.pub(X,[{size:e.getValue(ei),startIndex:s.length,endIndex:1/0}]);return}if((null==l?void 0:l.type)==="item-location"){s!==r&&e.pubIn({[eZ]:{data:s,initialLocation:l.location,purgeItemSizes:l.purgeItemSizes}});return}return(null==l?void 0:l.type)==="auto-scroll-to-bottom"?void e.pubIn({[e$]:s,[eU]:{data:s,scrollToBottom:l.autoScroll}}):(null==l?void 0:l.type)==="items-change"?void e.pub(e2,{newData:s,autoscrollToBottomBehavior:l.behavior}):void e.pub(e$,s)})},(e,t)=>!!e&&e.data===(null==t?void 0:t.data)),rt=({item:e,ItemContent:t,mount:r,unmount:n})=>{let o=k(eV),l=i.useRef(null),a=i.useCallback(e=>{e?(l.current=e,r(e)):l.current&&(n(l.current),l.current=null)},[r,n]);return(0,s.jsx)("div",{ref:a,"data-index":e.index,"data-known-size":e.height,style:{overflowAnchor:"none",position:"absolute",width:"100%",top:e.offset},children:(0,s.jsx)(t,{index:e.index,prevData:e.prevData,nextData:e.nextData,data:e.data,context:o})})},rr=b("top",e=>{e.link(e.pipe(e.combine(rr,eu,ti,tv,tg),E(([e])=>"bottom"===e||"bottom-smooth"===e),C(([,e,t,r,n])=>Math.max(0,t-e-r-n))),tj),e.link(e.pipe(e.combine(tj,rr),E(([,e])=>"bottom-smooth"===e),M((e,[t])=>[e[1],t],[0,0]),C(([e,t])=>e>0&&t>0?"margin-top 0.2s ease-out":"")),tO)});function rn(e){let t=i.useRef(null);return[i.useCallback(r=>{r?(t.current=r,null==e||e.observe(r,{box:"border-box"})):t.current&&(null==e||e.unobserve(t.current),t.current=null)},[e]),t]}function ri(e,t,r,n,i,o){var s,l;return ru((s=ru(ru(t,e),ru(n,o)),s<<(l=i)|s>>>32-l),r)}function ro(e,t,r,n,i,o,s){return ri(t&r|~t&n,e,t,i,o,s)}function rs(e,t,r,n,i,o,s){return ri(t&n|r&~n,e,t,i,o,s)}function rl(e,t,r,n,i,o,s){return ri(t^r^n,e,t,i,o,s)}function ra(e,t,r,n,i,o,s){return ri(r^(t|~n),e,t,i,o,s)}function ru(e,t){let r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}let rc=Symbol("INVALID_KEY"),rf={valid:!1,consoleMessage:"Your VirtuosoMessageListLicense is missing a license key. Purchase one from https://virtuoso.dev/pricing/",watermarkMessage:"Your VirtuosoMessageListLicense is missing a license key. Purchase one from https://virtuoso.dev/pricing/"},rd={valid:!1,consoleMessage:"Your VirtuosoMessageListLicense component is missing a license key - this component will not work if deployed in production. Purchase a key from https://virtuoso.dev/pricing/ before you deploy to production."},rp={valid:!0},rh={valid:!1,consoleMessage:"Your Virtuoso Message List license key is invalid. Ensure that you have copy-pasted the key from the purchase email correctly.",watermarkMessage:"Your Virtuoso Message List license key is invalid"},rm={valid:!1,consoleMessage:"Your annual license key to use Virtuoso Message List in non-production environments has expired. You can still use it in production. To keep using it in development, purchase a new key from https://virtuoso.dev/pricing/",watermarkMessage:"Your annual license key to use Virtuoso Message List in non-production environments has expired. You can still use it in production. To keep using it in development, purchase a new key from https://virtuoso.dev/pricing/"},rb={valid:!1,consoleMessage:"You have installed a version of `@virtuoso.dev/message-list` that is newer than the period of your license key. Either downgrade to a supported version, or purchase a new license from https://virtuoso.dev/pricing/",watermarkMessage:"You have installed a version of `@virtuoso.dev/message-list` that is newer than the period of your license key. Either downgrade to a supported version, or purchase a new license from https://virtuoso.dev/pricing/"},rv=/^(?:127\.0\.0\.1|localhost|0\.0\.0\.0|.+\.local)$/,rg=["virtuoso.dev","csb.app","codesandbox.io"],ry=i.createContext({valid:!1,consoleMessage:"The VirtuosoMessageList license wrapper component is missing. Enclose the VirtuosoMessageList with VirtuosoMessageListLicense and add your key at the lisenceKey property.",watermarkMessage:"The VirtuosoMessageList license wrapper component is missing. Enclose the VirtuosoMessageList with VirtuosoMessageListLicense and add your key at the lisenceKey property."}),rx=({licenseKey:e,children:t})=>{let r=function({licenseKey:e,now:t,hostname:r,packageTimestamp:n}){let i=r.match(rv),o=rg.some(e=>r.endsWith(e));if(!e)return o?rp:i?rd:rf;let s=function(e){let t=e.slice(0,32),r=e.slice(32),n=atob(r);if(t!==(function(e){for(var t,r="0123456789ABCDEF",n="",i=0;i<e.length;i++)n+=r.charAt((t=e.charCodeAt(i))>>>4&15)+r.charAt(15&t);return n})(function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=0x67452301,n=-0x10325477,i=-0x67452302,o=0x10325476,s=0;s<e.length;s+=16){let t=r,l=n,a=i,u=o;n=ra(n=ra(n=ra(n=ra(n=rl(n=rl(n=rl(n=rl(n=rs(n=rs(n=rs(n=rs(n=ro(n=ro(n=ro(n=ro(n,i=ro(i,o=ro(o,r=ro(r,n,i,o,e[s+0],7,-0x28955b88),n,i,e[s+1],12,-0x173848aa),r,n,e[s+2],17,0x242070db),o,r,e[s+3],22,-0x3e423112),i=ro(i,o=ro(o,r=ro(r,n,i,o,e[s+4],7,-0xa83f051),n,i,e[s+5],12,0x4787c62a),r,n,e[s+6],17,-0x57cfb9ed),o,r,e[s+7],22,-0x2b96aff),i=ro(i,o=ro(o,r=ro(r,n,i,o,e[s+8],7,0x698098d8),n,i,e[s+9],12,-0x74bb0851),r,n,e[s+10],17,-42063),o,r,e[s+11],22,-0x76a32842),i=ro(i,o=ro(o,r=ro(r,n,i,o,e[s+12],7,0x6b901122),n,i,e[s+13],12,-0x2678e6d),r,n,e[s+14],17,-0x5986bc72),o,r,e[s+15],22,0x49b40821),i=rs(i,o=rs(o,r=rs(r,n,i,o,e[s+1],5,-0x9e1da9e),n,i,e[s+6],9,-0x3fbf4cc0),r,n,e[s+11],14,0x265e5a51),o,r,e[s+0],20,-0x16493856),i=rs(i,o=rs(o,r=rs(r,n,i,o,e[s+5],5,-0x29d0efa3),n,i,e[s+10],9,0x2441453),r,n,e[s+15],14,-0x275e197f),o,r,e[s+4],20,-0x182c0438),i=rs(i,o=rs(o,r=rs(r,n,i,o,e[s+9],5,0x21e1cde6),n,i,e[s+14],9,-0x3cc8f82a),r,n,e[s+3],14,-0xb2af279),o,r,e[s+8],20,0x455a14ed),i=rs(i,o=rs(o,r=rs(r,n,i,o,e[s+13],5,-0x561c16fb),n,i,e[s+2],9,-0x3105c08),r,n,e[s+7],14,0x676f02d9),o,r,e[s+12],20,-0x72d5b376),i=rl(i,o=rl(o,r=rl(r,n,i,o,e[s+5],4,-378558),n,i,e[s+8],11,-0x788e097f),r,n,e[s+11],16,0x6d9d6122),o,r,e[s+14],23,-0x21ac7f4),i=rl(i,o=rl(o,r=rl(r,n,i,o,e[s+1],4,-0x5b4115bc),n,i,e[s+4],11,0x4bdecfa9),r,n,e[s+7],16,-0x944b4a0),o,r,e[s+10],23,-0x41404390),i=rl(i,o=rl(o,r=rl(r,n,i,o,e[s+13],4,0x289b7ec6),n,i,e[s+0],11,-0x155ed806),r,n,e[s+3],16,-0x2b10cf7b),o,r,e[s+6],23,0x4881d05),i=rl(i,o=rl(o,r=rl(r,n,i,o,e[s+9],4,-0x262b2fc7),n,i,e[s+12],11,-0x1924661b),r,n,e[s+15],16,0x1fa27cf8),o,r,e[s+2],23,-0x3b53a99b),i=ra(i,o=ra(o,r=ra(r,n,i,o,e[s+0],6,-0xbd6ddbc),n,i,e[s+7],10,0x432aff97),r,n,e[s+14],15,-0x546bdc59),o,r,e[s+5],21,-0x36c5fc7),i=ra(i,o=ra(o,r=ra(r,n,i,o,e[s+12],6,0x655b59c3),n,i,e[s+3],10,-0x70f3336e),r,n,e[s+10],15,-1051523),o,r,e[s+1],21,-0x7a7ba22f),i=ra(i,o=ra(o,r=ra(r,n,i,o,e[s+8],6,0x6fa87e4f),n,i,e[s+15],10,-0x1d31920),r,n,e[s+6],15,-0x5cfebcec),o,r,e[s+13],21,0x4e0811a1),i=ra(i,o=ra(o,r=ra(r,n,i,o,e[s+4],6,-0x8ac817e),n,i,e[s+11],10,-0x42c50dcb),r,n,e[s+2],15,0x2ad7d2bb),o,r,e[s+9],21,-0x14792c6f),r=ru(r,t),n=ru(n,l),i=ru(i,a),o=ru(o,u)}return[r,n,i,o]}(function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}(r),8*r.length))).toLowerCase())return rc;let[i,o]=n.split(";");return{orderNumber:i.slice(2),expiryDate:new Date(Number(o.slice(2)))}}(e);if(s===rc)return rh;if(s.expiryDate.getTime()<t.getTime()){if(i)return rm;if(s.expiryDate.getTime()<n)return rb}return rp}({licenseKey:e,hostname:"u">typeof window?window.location.hostname:"localhost",now:new Date,packageTimestamp:0x198d05839b9});return(0,s.jsx)(ry.Provider,{value:r,children:t})};rx.displayName=Math.random().toString(36).slice(2,8);let rw=i.createContext(void 0),rk=!1,rC=i.forwardRef(({initialData:e=[],computeItemKey:t=t5,context:r=null,initialLocation:n=null,shortSizeAlign:o="top",onScroll:l,onRenderedDataChange:a,ItemContent:u=t6,Header:c=null,StickyHeader:f=null,Footer:d=null,StickyFooter:p=null,EmptyPlaceholder:h=null,HeaderWrapper:b=tG,StickyHeaderWrapper:v=tJ,FooterWrapper:g=tZ,StickyFooterWrapper:x=tX,useWindowScroll:w=!1,customScrollParent:k=null,ScrollElement:C="div",increaseViewportBy:T=0,data:S,itemIdentity:E=t7,...M},_)=>{let I=i.useMemo(()=>{let i=new m;return i.register(e5),i.register(te),i.register(eI),i.register(e4),i.register(eM),i.register(eQ),i.register(eN),i.register(eZ),i.pubIn({[e$]:e.slice(),[t4]:t7,[eV]:r,[t8]:t,[eD]:n,[t9]:u,[tH]:c,[t$]:d,[tV]:f,[tq]:p,[tN]:h,[tU]:C,[t3]:x,[t1]:v,[t2]:g,[t0]:b,[rr]:o,[tW]:w,[tL]:k,[tm]:T}),i.singletonSub(tM,l),i.singletonSub(e9,a),i},[]);i.useImperativeHandle(_,()=>({data:{prepend:e=>{I.pub(eN,e)},append:(e,t)=>{I.pub(eQ,{data:e,scrollToBottom:t})},replace:(e,t)=>{I.pub(eZ,{...t,data:e})},map:(e,t)=>{I.pub(e1,{mapper:e,autoscrollToBottomBehavior:t})},findAndDelete:e=>{I.pub(e0,e)},findIndex:e=>I.getValue(e$).findIndex(e),find:e=>I.getValue(e$).find(e),insert:(e,t,r)=>{I.pub(eY,{data:e,offset:t,scrollToBottom:r})},deleteRange:(e,t)=>{I.pub(eK,{offset:e,count:t})},batch:(e,t)=>{I.pub(ee,!0),e(),I.pub(ee,!1),I.pub(eU,{data:[],scrollToBottom:t})},get:()=>I.getValue(e$).slice(),getCurrentlyRendered:()=>I.getValue(e9),removeFromStart:e=>{I.pub(eJ,e)}},scrollToItem:e=>{I.pub(eA,e)},scrollIntoView:e=>{I.pub(eL,e)},scrollerElement:()=>I.getValue(tp),getScrollLocation:()=>I.getValue(tE),cancelSmoothScroll(){I.pub(th)},height:e=>{var t;let r=(null==(t=I.getValue(e$))?void 0:t.indexOf(e))??-1;return -1===r?0:W(I.getValue(er),r)[1]??0}}),[I]),i.useEffect(()=>{I.pubIn({[eV]:r,[t9]:u,[tL]:k,[re]:S}),I.singletonSub(tM,l),I.singletonSub(e9,a)},[r,u,k,l,a,I,S]);let P=i.useContext(ry);return i.useEffect(()=>{P.consoleMessage&&(rk||(rk=!0,console.warn(P.consoleMessage)))},[P]),i.useEffect(()=>{let e=e=>{var t;null!=(t=e.message)&&t.includes("ResizeObserver loop")&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())};return window.addEventListener("error",e,{capture:!0}),()=>{window.removeEventListener("error",e)}},[]),"u">typeof window&&P.watermarkMessage?(0,s.jsx)("div",{style:{color:"red",pointerEvents:"none"},children:P.watermarkMessage}):(0,s.jsx)(y.Provider,{value:I,children:(0,s.jsx)(rT,{...M})})});rC.displayName="VirtuosoMessageList";let rT=({style:e,...t})=>{let r=w(),n=i.useContext(rw),[o,l,a,u,c,f,d,p,h,m,b]=function(...e){let t=w();return k(t.combineCells.apply(t,e))}(tH,tV,t0,t1,t$,tq,t2,t3,t9,tN,tL),[v]=i.useState(()=>{if("u">typeof window&&typeof ResizeObserver>"u")throw Error("ResizeObserver not found. Please ensure that you have a polyfill installed.");if(!(typeof ResizeObserver>"u"))return new ResizeObserver(e=>{var t,n,i,o;let s=e.length,l=[],a={};for(let r=0;r<s;r++){let s=e[r],u=s.target;if(u===S.current){a={...a,[tc]:s.contentRect.height,[ts]:null==(t=_.current)?void 0:t.scrollHeight};continue}if(u===M.current){a={...a,[tu]:s.contentRect.height,[ts]:null==(n=_.current)?void 0:n.scrollHeight};continue}if(u===y.current){a={...a,[td]:s.contentRect.height,[ts]:null==(i=_.current)?void 0:i.scrollHeight};continue}if(u===C.current){a={...a,[tf]:s.contentRect.height,[ts]:null==(o=_.current)?void 0:o.scrollHeight};continue}if(u===_.current){a={...a,[tn]:u.scrollTop,[ts]:u.scrollHeight,[ti]:s.contentRect.height,[to]:u.clientWidth};continue}if(u===P.current){_.current&&(a={...a,[ts]:_.current.scrollHeight});continue}if(u===I.current){let e=u.ownerDocument.defaultView;null!==e&&(a={...a,[ts]:s.contentRect.height,[tB]:e.scrollY,[tD]:e.innerHeight,[tA]:u.getBoundingClientRect().top+e.scrollY,[to]:u.clientWidth});continue}if(u===b||u===j.current){let e=O.current,t=j.current;e&&t&&(a={...a,[ts]:t.getBoundingClientRect().height,[tB]:e.scrollTop,[tD]:e.clientHeight,[tA]:t.offsetTop,[to]:t.clientWidth});continue}if(void 0===u.dataset.index)continue;let c=Number.parseInt(u.dataset.index),f=Number.parseFloat(u.dataset.knownSize??""),d=s.contentRect.height;if(d===f)continue;let p=l[l.length-1];0===l.length||p.size!==d||p.endIndex!==c-1?l.push({endIndex:c,size:d,startIndex:c}):l[l.length-1].endIndex++}l.length>0&&(a={...a,[X]:l}),r.pubIn(a)})}),[g,y]=rn(v),[x,C]=rn(v),[T,S]=rn(v),[E,M]=rn(v),_=i.useRef(null),I=i.useRef(null),P=i.useRef(null),j=i.useRef(null),O=i.useRef(null);(0,i.useEffect)(()=>{O.current=b},[b]);let R=i.useCallback(e=>{if(n){let t=Number.parseInt(e.dataset.index??"");r.pub(X,[{startIndex:t,endIndex:t,size:n.itemHeight}])}null==v||v.observe(e)},[v,r,n]),z=i.useCallback(e=>{null==v||v.unobserve(e)},[v]),F=i.useCallback(e=>{e?(P.current=e,null==v||v.observe(e,{box:"border-box"})):P.current&&(null==v||v.unobserve(P.current),P.current=null)},[v]),{items:W}=k(e5),L=i.useCallback(()=>{var e;let t=[];for(let r of(null==(e=P.current)?void 0:e.children)??[]){if(void 0===r.dataset.index)continue;let e=Number.parseInt(r.dataset.index),n=Number.parseFloat(r.dataset.knownSize??""),i=r.getBoundingClientRect().height;if(i===n)continue;let o=t[t.length-1];0===t.length||o.size!==i||o.endIndex!==e-1?t.push({endIndex:e,size:i,startIndex:e}):t[t.length-1].endIndex++}r.pub(X,t)},[r]);i.useLayoutEffect(()=>r.sub(tz,L),[L,r]);let A=k(tI),B=k(tP),D=k(tj),H=k(tk),V=k(tO),$=k(eV),q=k(t8),N=k(eH),U=k(eu),Q=k(tW),Y=k(eB);return i.useLayoutEffect(()=>{0===W.length&&r.pub(tF)},[W,r]),i.useLayoutEffect(()=>{var e;N>0&&null===Y&&null!==m&&r.pub(ts,null==(e=_.current)?void 0:e.scrollHeight)},[r,N,Y,m]),(0,s.jsxs)(b?rM:Q?rE:rS,{...t,observer:v,scrollerRef:_,customScrollParentWrapperRef:j,listRef:P,style:e,windowScrollWrapperRef:I,children:[(0===N||Y)&&m?(0,s.jsx)(m,{context:$}):null,l&&(0,s.jsx)(u,{ref:E,style:tY,children:(0,s.jsx)(l,{context:$})}),o&&(0,s.jsx)(a,{ref:T,style:tY,children:(0,s.jsx)(o,{context:$})}),N>0?(0,s.jsx)("div",{ref:F,"data-testid":"virtuoso-list",style:{boxSizing:"content-box",height:U,paddingBottom:H,overflowAnchor:"none",marginTop:D,transition:V,position:"relative",transform:`translateY(${A+B}px)`,visibility:Y?"hidden":"visible"},children:W.map(e=>(0,s.jsx)(rt,{mount:R,unmount:z,item:e,ItemContent:h},q({index:e.index,data:e.data,context:$})))}):null,c&&(0,s.jsx)(d,{ref:g,style:tY,children:(0,s.jsx)(c,{context:$})}),f&&(0,s.jsx)(p,{ref:x,style:tY,children:(0,s.jsx)(f,{context:$})})]})},rS=({customScrollParentWrapperRef:e,windowScrollWrapperRef:t,observer:r,children:n,listRef:o,scrollerRef:l,style:a,...u})=>{let c=w(),f=i.useContext(rw),d=k(tU),{onScroll:p,onWheel:h}=r_({listRef:o,scrollTopCell$:tn,scrollToSignal$:tT,scrollableRef:l}),m=i.useCallback(e=>{e?(c.pub(tp,e),l.current=e,e.addEventListener("scroll",p),e.addEventListener("wheel",h),f&&c.pubIn({[ti]:f.viewportHeight,[ts]:f.viewportHeight,[tn]:0}),null==r||r.observe(e,{box:"border-box"})):l.current&&(l.current.removeEventListener("scroll",p),l.current.removeEventListener("wheel",h),c.pub(tp,null),null==r||r.unobserve(l.current),l.current=null)},[r,c,p,h,f,l]);rI(()=>{var e;return null==(e=l.current)?void 0:e.scrollHeight});let b=k(e8),v=k(eV);return(0,s.jsx)(d,{...u,ref:m,"data-testid":"virtuoso-scroller",style:{overflowY:b?"hidden":"scroll",boxSizing:"border-box",...a},..."div"===d?{}:{context:v},children:n})},rE=({observer:e,children:t,windowScrollWrapperRef:r,customScrollParentWrapperRef:n,listRef:o,...l})=>{let a=i.useRef(null),u=w(),c=i.useContext(rw),{onScroll:f,onWheel:d}=r_({listRef:o,scrollTopCell$:tB,scrollToSignal$:tS,scrollableRef:a}),p=i.useCallback(()=>{var e;let t=a.current;null!==t&&u.pub(tD,null==(e=t.ownerDocument.defaultView)?void 0:e.innerHeight)},[u]),h=i.useCallback(t=>{if(t){u.pub(tp,t),r.current=t;let n=t.ownerDocument.defaultView;n&&(n.addEventListener("scroll",f),n.addEventListener("wheel",d),n.addEventListener("resize",p),c&&u.pubIn({[tD]:null==n?void 0:n.innerHeight,[ts]:t.getBoundingClientRect().height,[tB]:0}),a.current=t.ownerDocument.documentElement),null==e||e.observe(t,{box:"border-box"})}else{if(r.current){let t=r.current.ownerDocument.defaultView;t&&(t.removeEventListener("scroll",f),t.removeEventListener("wheel",d),t.removeEventListener("resize",p)),u.pub(tp,null),null==e||e.unobserve(r.current),r.current=null}a.current=null}},[e,u,f,d,p,c,r]);return rI(()=>{var e;return null==(e=r.current)?void 0:e.getBoundingClientRect().height}),(0,s.jsx)("div",{ref:h,...l,children:t})},rM=({scrollerRef:e,windowScrollWrapperRef:t,children:r,listRef:n,customScrollParentWrapperRef:o,observer:l,...a})=>{let u=w(),c=i.useContext(rw),f=k(tL),d=i.useRef(f);(0,i.useEffect)(()=>{d.current=f},[f]);let{onWheel:p,onScroll:h}=r_({listRef:n,scrollTopCell$:tB,scrollToSignal$:tS,scrollableRef:d}),m=i.useCallback(e=>{if(e){let t=d.current;u.pub(tp,t),o.current=e,t&&(t.addEventListener("scroll",h),t.addEventListener("wheel",p),c&&u.pubIn({[tD]:t.clientHeight,[ts]:e.getBoundingClientRect().height,[tB]:0}),null==l||l.observe(t,{box:"border-box"})),null==l||l.observe(e,{box:"border-box"})}else{let e=d.current;e&&(e.removeEventListener("scroll",h),e.removeEventListener("wheel",p),u.pub(tp,null),null==l||l.unobserve(e)),o.current&&(null==l||l.unobserve(o.current)),o.current=null}},[l,u,h,p,c,o]);return rI(()=>{var e;return null==(e=o.current)?void 0:e.getBoundingClientRect().height}),(0,s.jsx)("div",{ref:m,...a,children:r})};function r_({scrollToSignal$:e,scrollableRef:t,listRef:r,scrollTopCell$:n}){let o=w(),s=i.useRef(null),l=function(e,t,r){let n=w(),o=i.useRef(null),s=i.useRef(null),l=i.useCallback(()=>{o.current&&(cancelAnimationFrame(o.current),o.current=null,s.current=null)},[]);i.useEffect(()=>n.sub(tR,e=>{e!==s.current&&l()}),[n,l]),i.useEffect(()=>n.sub(th,l),[n,l]);let a=i.useCallback((t,r,n)=>{var i;o.current&&l();let a=(null==(i=e.current)?void 0:i.scrollTop)??0;s.current=a<t?"down":"up";let u=0,c=0;!function i(){var l,f;let d=a+(t-a)*r(u);null==(l=e.current)||l.scrollTo({top:d,behavior:"instant"}),u+=1/n,(c+=1)<n?o.current=requestAnimationFrame(i):(null==(f=e.current)||f.scrollTo({top:t,behavior:"instant"}),o.current=null,s.current=null)}()},[e,l]);return i.useCallback(i=>{var o,s;let u=e.current;if(!(!u||void 0===i.top)){if(.5>Math.abs(i.top-u.scrollTop))return void requestAnimationFrame(()=>{var t;n.pub(tr,null==(t=e.current)?void 0:t.scrollTop)});if(r.current=i.top,n.pub(tt,!0),void 0!==i.forceBottomSpace&&t.current&&(t.current.style.paddingBottom=`${i.forceBottomSpace}px`),"smooth"===i.behavior)a(i.top??0,tb,50);else if("auto"===i.behavior||"instant"===i.behavior||void 0===i.behavior)l(),null==(o=e.current)||o.scrollTo(i);else{let{easing:t,animationFrameCount:r}=i.behavior((null==(s=e.current)?void 0:s.scrollTop)??0,i.top??0);a(i.top??0,t,r)}}},[n,a,t,e,r,l])}(t,r,s),a=i.useCallback(e=>{t.current&&(t.current.scrollTop+=e)},[t]),u=i.useCallback(()=>{let e=t.current;if(null!==e&&(o.pub(n,e.scrollTop),null!==s.current)){let t=e.scrollHeight-e.clientHeight;ed(e.scrollTop,Math.min(t,s.current))&&(s.current=null,o.pub(tt,!1),o.pub(tr,e.scrollTop))}},[o,t,n]),c=i.useCallback(e=>{o.pub(tR,e.deltaY>0?"down":"up")},[o]);return i.useLayoutEffect(()=>o.sub(e,l),[l,o,e]),i.useLayoutEffect(()=>o.sub(t_,a),[a,o]),{onScroll:u,onWheel:c}}function rI(e){let t=function(e){let t=w();return t.register(e),i.useCallback(r=>{t.pub(e,r)},[t,e])}(ts);(0,i.useLayoutEffect)(()=>{if(!ep())return;let r=setInterval(()=>{t(e()??0)},1e3);return()=>{clearInterval(r)}},[t,e])}},816:function(e,t,r){"use strict";r.d(t,{TK:()=>s,cH:()=>i,jV:()=>o});var n=r(447);n.registerSerializer;let i=n.spawn;n.BlobWorker,n.DefaultSerializer,n.Pool;let o=n.Thread;n.Transfer;let s=n.Worker}}]);